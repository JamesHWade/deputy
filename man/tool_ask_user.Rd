% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tools-interactive.R
\name{tool_ask_user}
\alias{tool_ask_user}
\title{AskUserQuestion tool}
\format{
A tool definition created with \code{ellmer::tool()}.
}
\usage{
tool_ask_user(questions)
}
\description{
A tool that allows the agent to ask the user clarifying questions and
receive their responses. This enables human-in-the-loop workflows where
the agent can request clarification or choices from the user.
}
\details{
This tool follows the Anthropic Agent SDK format:

\strong{Input format:}
\itemize{
\item \code{questions}: Array of 1-4 question objects
\item Each question has:
\itemize{
\item \code{question}: The full question text
\item \code{header}: Short label (max 12 chars)
\item \code{options}: Array of 2-4 options, each with \code{label} and \code{description}
\item \code{multiSelect}: Whether multiple selections are allowed
}
}

\strong{Output format:}
\itemize{
\item Returns \code{answers} as a named list mapping question text to selected label(s)
\item For multi-select, labels are joined with ", "
\item Users can also type free-form responses
}

In interactive R sessions, the tool uses \code{readline()} to get input.
For non-interactive use (scripts, Shiny apps), set a callback with
\code{\link[=set_ask_user_callback]{set_ask_user_callback()}}.
}
\examples{
\dontrun{
# Add to agent's tools
agent <- Agent$new(
  chat = ellmer::chat("openai/gpt-4o"),
  tools = c(tools_file(), tool_ask_user)
)

# The agent can ask structured questions like:
# {
#   "questions": [{
#     "question": "How should I format the output?",
#     "header": "Format",
#     "options": [
#       {"label": "Summary", "description": "Brief overview"},
#       {"label": "Detailed", "description": "Full explanation"}
#     ],
#     "multiSelect": false
#   }]
# }
}

}
\seealso{
\code{\link[=set_ask_user_callback]{set_ask_user_callback()}} for non-interactive usage
}
