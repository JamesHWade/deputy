[{"path":"https://jameshwade.github.io/deputy/AGENTS.html","id":null,"dir":"","previous_headings":"","what":"Agent Instructions","title":"Agent Instructions","text":"project uses bd (beads) issue tracking. Run bd onboard get started.","code":""},{"path":"https://jameshwade.github.io/deputy/AGENTS.html","id":"quick-reference","dir":"","previous_headings":"","what":"Quick Reference","title":"Agent Instructions","text":"","code":"bd ready              # Find available work bd show <id>          # View issue details bd update <id> --status in_progress  # Claim work bd close <id>         # Complete work bd sync               # Sync with git"},{"path":"https://jameshwade.github.io/deputy/AGENTS.html","id":"landing-the-plane-session-completion","dir":"","previous_headings":"","what":"Landing the Plane (Session Completion)","title":"Agent Instructions","text":"ending work session, MUST complete steps . Work complete git push succeeds. MANDATORY WORKFLOW: File issues remaining work - Create issues anything needs follow-Run quality gates (code changed) - Tests, linters, builds Update issue status - Close finished work, update -progress items PUSH REMOTE - MANDATORY: Clean - Clear stashes, prune remote branches Verify - changes committed pushed Hand - Provide context next session CRITICAL RULES: - Work complete git push succeeds - NEVER stop pushing - leaves work stranded locally - NEVER say “ready push ” - must push - push fails, resolve retry succeeds","code":"git pull --rebase bd sync git push git status  # MUST show \"up to date with origin\""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":null,"dir":"","previous_headings":"","what":"CLAUDE.md","title":"CLAUDE.md","text":"file provides guidance AI assistants working deputy codebase.","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"project-overview","dir":"","previous_headings":"","what":"Project Overview","title":"CLAUDE.md","text":"deputy R package implementing Anthropic’s Claude Agent SDK patterns. provides provider-agnostic framework building agentic AI workflows R, built ellmer LLM framework. Key capabilities: - Multi-step AI reasoning tool use - Fine-grained permission system tool annotations - Hook-based lifecycle event interception - Human---loop via tool_ask_user - Multi-agent delegation (LeadAgent) - Session persistence - Streaming output support","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"directory-structure","dir":"","previous_headings":"","what":"Directory Structure","title":"CLAUDE.md","text":"","code":"deputy/ ├── R/                      # Source code (R6 classes and functions) │   ├── agent.R             # Agent class - main agentic workflow engine │   ├── agents-multi.R      # LeadAgent for multi-agent orchestration │   ├── agent-result.R      # AgentResult and AgentEvent objects │   ├── permissions.R       # Permission system and tool annotations │   ├── hooks.R             # HookRegistry for lifecycle events │   ├── skills.R            # Skill loading system │   ├── tools-builtin.R     # Built-in tools (read_file, write_file, etc.) │   ├── tools-bundles.R     # Tool presets (minimal, standard, dev, data, full) │   ├── tools-interactive.R # tool_ask_user for human-in-the-loop │   ├── errors.R            # Custom error hierarchy │   └── utils.R             # Internal utilities ├── tests/testthat/         # Unit tests (testthat edition 3) ├── inst/skills/            # Built-in skills with YAML metadata ├── exec/deputy             # Terminal CLI using Rapp ├── vignettes/              # User documentation (R Markdown) ├── man/                    # Auto-generated roxygen2 docs ├── .claude/                # Claude Code environment setup └── .github/workflows/      # CI/CD pipelines"},{"path":[]},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"remote-claude-code-web","dir":"","previous_headings":"Development Setup","what":"Remote (Claude Code Web)","title":"CLAUDE.md","text":"repository includes SessionStart hook (.claude/setup-r.sh) automatically installs R Air working Claude Code web environments.","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"local","dir":"","previous_headings":"Development Setup","what":"Local","title":"CLAUDE.md","text":"","code":"# Install dependencies Rscript -e \"devtools::install_deps(dependencies = TRUE)\"  # Load package for development Rscript -e \"devtools::load_all()\""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"testing","dir":"","previous_headings":"Common Commands","what":"Testing","title":"CLAUDE.md","text":"","code":"# Run all tests Rscript -e \"devtools::test()\"  # Run specific test file Rscript -e \"testthat::test_file('tests/testthat/test-agent.R')\"  # Run tests with filter Rscript -e \"devtools::test(filter = 'permissions')\""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"code-quality","dir":"","previous_headings":"Common Commands","what":"Code Quality","title":"CLAUDE.md","text":"","code":"# Check package (runs R CMD check) Rscript -e \"devtools::check()\"  # Format code with Air air format R/  # Generate documentation Rscript -e \"devtools::document()\""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"building","dir":"","previous_headings":"Common Commands","what":"Building","title":"CLAUDE.md","text":"","code":"# Build package Rscript -e \"devtools::build()\"  # Install locally Rscript -e \"devtools::install()\""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"style","dir":"","previous_headings":"Code Conventions","what":"Style","title":"CLAUDE.md","text":"Formatter: Air (configuration air.toml) Documentation: roxygen2 markdown support Classes: R6 complex objects (Agent, Permissions, HookRegistry, Skill) Errors: Use custom error classes R/errors.R (e.g., deputy_error_permission_denied)","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"r6-class-pattern","dir":"","previous_headings":"Code Conventions","what":"R6 Class Pattern","title":"CLAUDE.md","text":"","code":"ClassName <- R6::R6Class(   \"ClassName\",   public = list(     field = NULL,      initialize = function(param) {       # Validation       # Assignment       invisible(self)     },      method = function() {       # Implementation     }   ),   private = list(     helper = function() {       # Private helper     }   ) )"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"tool-creation-pattern","dir":"","previous_headings":"Code Conventions","what":"Tool Creation Pattern","title":"CLAUDE.md","text":"","code":"#' Tool description #' @export tool_name <- ellmer::tool(   fun = function(param) {     # Implementation   },   name = \"tool_name\",   description = \"What this tool does\",   arguments = list(     param = ellmer::type_string(\"Parameter description\")   ),   annotations = ellmer::tool_annotations(     read_only_hint = TRUE,      # Doesn't modify state     destructive_hint = FALSE,   # Not destructive     open_world_hint = FALSE,    # No external systems     idempotent_hint = TRUE      # Safe to retry   ) )"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"error-handling","dir":"","previous_headings":"Code Conventions","what":"Error Handling","title":"CLAUDE.md","text":"","code":"# Use custom error constructors stop(deputy_error_permission_denied(   tool_name = \"write_file\",   reason = \"Write operations not allowed in readonly mode\" ))  # Catching errors tryCatch(   agent$run_sync(task),   deputy_error_permission_denied = function(e) {     cli::cli_alert_danger(\"Permission denied: {e$message}\")   } )"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"testing-pattern","dir":"","previous_headings":"Code Conventions","what":"Testing Pattern","title":"CLAUDE.md","text":"","code":"test_that(\"descriptive test name\", {   # Setup - use mocks from helper-mocks.R   mock_chat <- create_mock_chat()   agent <- Agent$new(chat = mock_chat)    # Exercise   result <- agent$run_sync(\"task\")    # Verify    expect_s3_class(result, \"AgentResult\")   expect_equal(result$stop_reason, \"end_turn\") })"},{"path":[]},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"core-flow","dir":"","previous_headings":"Architecture","what":"Core Flow","title":"CLAUDE.md","text":"Agent wraps ellmer Chat object User calls agent$run(task) (streaming) agent$run_sync(task) (blocking) Agent sends task LLM via ellmer LLM may request tool calls Permissions check tool annotations policy HookRegistry fires PreToolUse/PostToolUse events Tool executes returns result Loop continues LLM stops limits reached","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"permission-modes","dir":"","previous_headings":"Architecture","what":"Permission Modes","title":"CLAUDE.md","text":"\"default\" - Check tool policy \"readonly\" - allow read_only_hint tools \"acceptEdits\" - Auto-accept file writes \"bypassPermissions\" - Allow everything (dangerous)","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"tool-presets","dir":"","previous_headings":"Architecture","what":"Tool Presets","title":"CLAUDE.md","text":"tools_preset(\"minimal\") - read_file, list_files tools_preset(\"standard\") - + write_file, run_r_code tools_preset(\"dev\") - + run_bash tools_preset(\"data\") - read_file, list_files, read_csv, run_r_code tools_preset(\"full\") - built-tools","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"hook-events","dir":"","previous_headings":"Architecture","what":"Hook Events","title":"CLAUDE.md","text":"PreToolUse / PostToolUse - /tool execution Stop - agent finishes SessionStart / SessionEnd - Session lifecycle PreCompact - conversation compaction SubagentStop - delegated agent finishes UserPromptSubmit - user submits input (CLI)","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"dependencies","dir":"","previous_headings":"","what":"Dependencies","title":"CLAUDE.md","text":"Core (Imports): - ellmer (>= 0.3.0) - LLM abstraction layer - R6 - Object-oriented programming - cli - CLI formatting - rlang - Language utilities - coro - Coroutines streaming - digest - Hashing Development (Suggests): - testthat (>= 3.0.0) - Testing - Rapp - CLI framework - knitr - Vignettes","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"issue-tracking-with-beads","dir":"","previous_headings":"","what":"Issue Tracking with Beads","title":"CLAUDE.md","text":"project uses bd (beads) issue tracking. Issues stored .beads/ synced via git.","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"git-integration","dir":"","previous_headings":"Issue Tracking with Beads","what":"Git Integration","title":"CLAUDE.md","text":"Beads integrates git via: - JSONL sync: Issues stored .beads/issues.jsonl (git-tracked) - Merge driver: Intelligent JSONL conflict resolution (auto-configured) - Hooks: Auto-sync git operations Files committed: .beads/.gitignore, .gitattributes Files gitignored: .beads/beads.db, daemon files","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"essential-commands","dir":"","previous_headings":"Issue Tracking with Beads","what":"Essential Commands","title":"CLAUDE.md","text":"","code":"# Finding work bd ready                              # Show issues ready to work (no blockers) bd list --status=open                 # All open issues bd show <id>                          # Detailed issue view with dependencies  # Working on issues bd update <id> --status=in_progress   # Claim work bd close <id>                         # Mark complete bd close <id1> <id2> ...              # Close multiple issues  # Creating issues (always include description for context) bd create \"Fix bug\" --description=\"Details here\" -t bug -p 1  # Dependencies bd dep add <issue> <depends-on>       # Add dependency bd blocked                            # Show blocked issues bd dep tree <id>                      # View dependency tree  # Sync bd sync                               # Sync with git remote bd sync --status                      # Check sync status"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"when-to-use-beads-vs-todowrite","dir":"","previous_headings":"Issue Tracking with Beads","what":"When to Use Beads vs TodoWrite","title":"CLAUDE.md","text":"doubt, prefer beads—persistence don’t need beats lost context.","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"feature-branch--pr-workflow","dir":"","previous_headings":"","what":"Feature Branch + PR Workflow","title":"CLAUDE.md","text":"⚠️ changes must go Pull Requests. Never commit directly main. Create feature branch, make changes, open PR review.","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"before-creating-a-pr","dir":"","previous_headings":"Feature Branch + PR Workflow","what":"Before Creating a PR","title":"CLAUDE.md","text":"IMPORTANT: Review update CLAUDE.md changes affect: - New directories files documented - New code conventions patterns - New commands workflows - Changes architecture dependencies","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"id_1-find-work-and-create-feature-branch","dir":"","previous_headings":"Feature Branch + PR Workflow","what":"1. Find Work and Create Feature Branch","title":"CLAUDE.md","text":"⚠️ IMPORTANT: Create feature branch claiming issue writing code.","code":"bd ready                              # Find available work bd show <id>                          # Review issue details  # CREATE BRANCH FIRST - before any code changes! git checkout -b feature/<short-description> # or: git checkout -b fix/<short-description>  bd update <id> --status=in_progress   # Now claim the work"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"id_2-work-and-sync","dir":"","previous_headings":"Feature Branch + PR Workflow","what":"2. Work and Sync","title":"CLAUDE.md","text":"","code":"# Make changes... bd sync                               # Sync beads periodically"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"id_3-run-quality-gates","dir":"","previous_headings":"Feature Branch + PR Workflow","what":"3. Run Quality Gates","title":"CLAUDE.md","text":"","code":"# Format ALL code with air (R/ and tests/) air format R/ tests/testthat/  # Lint with jarl jarl check R/  # Run tests Rscript -e \"devtools::test()\"  # Run R CMD check Rscript -e \"devtools::check()\"  # Build pkgdown site Rscript -e \"devtools::document(); pkgdown::build_site(preview = FALSE)\""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"id_4-create-pr-and-close-issue","dir":"","previous_headings":"Feature Branch + PR Workflow","what":"4. Create PR and Close Issue","title":"CLAUDE.md","text":"code complete ready review: Important: Close beads issue work complete, PR merged. issue tracks work; PR tracks review/merge process.","code":"git add . git commit -m \"feat: description (deputy-xxx)\"  # Include beads issue ID! bd close <id>                         # Close beads issue - work is done bd sync git push -u origin HEAD gh pr create --title \"...\" --body \"Resolves deputy-XXX\""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"id_5-human-reviews-and-merges-pr","dir":"","previous_headings":"Feature Branch + PR Workflow","what":"5. Human Reviews and Merges PR","title":"CLAUDE.md","text":"Agents create PRs merge . Humans review merge PRs main.","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"id_6-after-pr-merged-cleanup","dir":"","previous_headings":"Feature Branch + PR Workflow","what":"6. After PR Merged (Cleanup)","title":"CLAUDE.md","text":"use:","code":"git checkout main git pull git branch -d feature/<short-description> usethis::pr_finish()"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"session-completion-protocol","dir":"","previous_headings":"","what":"Session Completion Protocol","title":"CLAUDE.md","text":"CRITICAL: ending session, complete steps. Work complete git push succeeds.","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"mandatory-checklist-feature-branch-workflow","dir":"","previous_headings":"Session Completion Protocol","what":"Mandatory Checklist (Feature Branch Workflow)","title":"CLAUDE.md","text":"","code":"# 1. Verify you're on a feature branch (NOT main!) git branch --show-current  # Should NOT be 'main'  # 2. File issues for remaining work bd create \"Follow-up task\" --description=\"...\" -t task -p 2  # 3. Run quality gates (if code changed) air format R/ tests/testthat/ jarl check R/ Rscript -e \"devtools::check()\"  # 4. Update issue status bd close <completed-issues>           # Include reason if helpful bd update <in-progress-issues> --status=open  # If not finished  # 5. Commit with beads issue ID git add . git commit -m \"feat: description (deputy-xxx)\"  # Always include issue ID! bd sync git push -u origin HEAD  # 6. Create PR (if not already created) gh pr create --title \"...\" --body \"Resolves deputy-xxx\"  # 7. Verify git status  # Should show \"up to date with origin\""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"critical-rules","dir":"","previous_headings":"Session Completion Protocol","what":"Critical Rules","title":"CLAUDE.md","text":"NEVER commit directly main - always use feature branches Work complete git push succeeds NEVER stop pushing—leaves work stranded locally NEVER say “ready push ”—must push push fails, resolve retry succeeds Always run bd sync ending session Always include beads issue ID commit messages (enables bd doctor detect orphans)","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"parallel-sessions--worktrees","dir":"","previous_headings":"","what":"Parallel Sessions & Worktrees","title":"CLAUDE.md","text":"project supports parallel work via git worktrees. beads daemon commits changes dedicated branch, preventing conflicts multiple Claude sessions run simultaneously.","code":""},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"creating-worktrees-for-parallel-features","dir":"","previous_headings":"Parallel Sessions & Worktrees","what":"Creating Worktrees for Parallel Features","title":"CLAUDE.md","text":"worktrees share .beads database main repo. Changes immediately visible across sessions.","code":"# From main repo, create worktree for a feature git worktree add ../deputy-feature-x -b feature/feature-x cd ../deputy-feature-x  # Beads commands work normally - shared database, safe daemon bd ready bd create \"Implement feature\" -t task -p 2 bd sync"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"cleanup-after-pr-merged","dir":"","previous_headings":"Parallel Sessions & Worktrees","what":"Cleanup After PR Merged","title":"CLAUDE.md","text":"","code":"git worktree remove ../deputy-feature-x git worktree prune"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"troubleshooting-branch-already-checked-out","dir":"","previous_headings":"Parallel Sessions & Worktrees","what":"Troubleshooting: “Branch already checked out”","title":"CLAUDE.md","text":"git says branch checked beads worktree:","code":"rm -rf .git/beads-worktrees git worktree prune"},{"path":"https://jameshwade.github.io/deputy/CLAUDE.html","id":"cicd","dir":"","previous_headings":"","what":"CI/CD","title":"CLAUDE.md","text":"GitHub Actions workflows .github/workflows/: - R-CMD-check.yaml - Package check multiple platforms - test-coverage.yaml - Code coverage codecov - pkgdown.yaml - Documentation site - format-suggest.yaml - Code formatting suggestions - claude.yml / claude-code-review.yml - Claude integration","code":""},{"path":"https://jameshwade.github.io/deputy/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2026 deputy authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Getting Started with deputy","text":"’ll also need ellmer underlying LLM functionality:","code":"# Install from GitHub # install.packages(\"pak\") pak::pak(\"JamesHWade/deputy\") pak::pak(\"tidyverse/ellmer\")"},{"path":[]},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"creating-an-agent","dir":"Articles","previous_headings":"Quick Start","what":"Creating an Agent","title":"Getting Started with deputy","text":"agent combines LLM (via ellmer) tools permissions:","code":"library(deputy)  # Create an agent with file tools agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_file() )  # Run a task result <- agent$run_sync(\"What R files are in the current directory?\") cat(result$response)"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"streaming-output","dir":"Articles","previous_headings":"Quick Start","what":"Streaming Output","title":"Getting Started with deputy","text":"real-time feedback, use run() method returns generator:","code":"for (event in agent$run(\"Analyze the structure of this project\")) {   switch(     event$type,     \"text\" = cat(event$text),     \"tool_start\" = cli::cli_alert_info(\"Calling {event$tool_name}...\"),     \"tool_end\" = cli::cli_alert_success(\"Done\"),     \"stop\" = cli::cli_alert(\"Finished! Cost: ${event$cost$total}\")   ) }"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"tools","dir":"Articles","previous_headings":"","what":"Tools","title":"Getting Started with deputy","text":"deputy provides built-tools convenient bundles:","code":"# Combine multiple tool bundles agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = c(tools_file(), tools_code()) )"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"custom-tools","dir":"Articles","previous_headings":"Tools","what":"Custom Tools","title":"Getting Started with deputy","text":"can create custom tools using ellmer’s tool() function:","code":"# Create a custom tool tool_weather <- ellmer::tool(   name = \"get_weather\",   description = \"Get the current weather for a location\",   arguments = list(     location = ellmer::tool_arg(       type = \"string\",       description = \"City name\"     )   ),   .fun = function(location) {     # Your implementation here     paste(\"Weather in\", location, \"is sunny, 72F\")   } )  agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = list(tool_weather) )"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"permissions","dir":"Articles","previous_headings":"","what":"Permissions","title":"Getting Started with deputy","text":"Permissions control agent allowed . deputy provides three preset configurations:","code":""},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"standard-permissions-default","dir":"Articles","previous_headings":"Permissions","what":"Standard Permissions (default)","title":"Getting Started with deputy","text":"","code":"# Allows: file read/write (in working dir), R code execution # Denies: bash commands, web access, package installation agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_file(),   permissions = permissions_standard() )"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"read-only-permissions","dir":"Articles","previous_headings":"Permissions","what":"Read-Only Permissions","title":"Getting Started with deputy","text":"","code":"# Only allows reading files - no writes, no code execution agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_file(),   permissions = permissions_readonly() )"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"full-permissions","dir":"Articles","previous_headings":"Permissions","what":"Full Permissions","title":"Getting Started with deputy","text":"","code":"# Allows everything - use with caution! agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_all(),   permissions = permissions_full() )"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"custom-permissions","dir":"Articles","previous_headings":"Permissions","what":"Custom Permissions","title":"Getting Started with deputy","text":"fine-grained control:","code":"perms <- Permissions$new(   file_read = TRUE,   file_write = \"/path/to/allowed/dir\", # Restrict to specific directory    bash = FALSE,   r_code = TRUE,   web = FALSE,   max_turns = 10,   max_cost_usd = 0.50 )  agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   permissions = perms )"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"custom-permission-callbacks","dir":"Articles","previous_headings":"Permissions","what":"Custom Permission Callbacks","title":"Getting Started with deputy","text":"complex permission logic:","code":"perms <- Permissions$new(   can_use_tool = function(tool_name, tool_input, context) {     # Block any file writes to sensitive directories     if (tool_name == \"write_file\") {       if (grepl(\"^\\\\.env|secrets|credentials\", tool_input$path)) {         return(PermissionResultDeny(           reason = \"Cannot write to sensitive files\"         ))       }     }     PermissionResultAllow()   } )"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"tool-allowdeny-lists-claude-sdk-style","dir":"Articles","previous_headings":"Permissions","what":"Tool Allow/Deny Lists (Claude SDK-style)","title":"Getting Started with deputy","text":"Use allow/deny lists want explicit tool policy separate broader mode flags: lists present, tool_denylist wins. permission_prompt_tool_name tool always allowed appears deny reasons model can request approval.","code":"perms <- Permissions$new(   mode = \"default\",   tool_allowlist = c(\"read_file\", \"list_files\", \"run_r_code\"),   tool_denylist = c(\"run_bash\"),   permission_prompt_tool_name = \"AskUserQuestion\" )  agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_all(),   permissions = perms )"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"applying-tool-policy-from--claudesettings-json","dir":"Articles","previous_headings":"Permissions","what":"Applying Tool Policy from .claude/settings.json","title":"Getting Started with deputy","text":"setting_sources now maps Claude-style tool policy keys directly permissions: Example .claude/settings.json:","code":"agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_all(),   setting_sources = \"project\" ) {   \"allowedTools\": [\"read_file\", \"list_files\", \"run_r_code\"],   \"disallowedTools\": [\"run_bash\"],   \"permissionPromptToolName\": \"AskUserQuestion\" }"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"hooks","dir":"Articles","previous_headings":"","what":"Hooks","title":"Getting Started with deputy","text":"Hooks let intercept customize agent behavior key points:","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"example-logging-all-tool-calls","dir":"Articles","previous_headings":"Hooks","what":"Example: Logging All Tool Calls","title":"Getting Started with deputy","text":"","code":"agent$add_hook(HookMatcher$new(   event = \"PostToolUse\",   callback = function(tool_name, tool_result, context) {     cli::cli_alert_info(\"Tool {tool_name} completed\")     HookResultPostToolUse()   } ))"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"example-block-dangerous-commands","dir":"Articles","previous_headings":"Hooks","what":"Example: Block Dangerous Commands","title":"Getting Started with deputy","text":"","code":"agent$add_hook(HookMatcher$new(   event = \"PreToolUse\",   pattern = \"^run_bash$\", # Only match bash tool   callback = function(tool_name, tool_input, context) {     if (grepl(\"rm -rf|sudo|chmod 777\", tool_input$command)) {       HookResultPreToolUse(         permission = \"deny\",         reason = \"Dangerous command pattern detected\"       )     } else {       HookResultPreToolUse(permission = \"allow\")     }   } ))"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"session-management","dir":"Articles","previous_headings":"","what":"Session Management","title":"Getting Started with deputy","text":"Save restore agent sessions:","code":"# Save the current session agent$save_session(\"my_session.rds\")  # Later, restore it agent2 <- Agent$new(chat = ellmer::chat(\"openai\")) agent2$load_session(\"my_session.rds\")  # Continue the conversation result <- agent2$run_sync(\"Continue where we left off...\")"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"multi-agent-systems","dir":"Articles","previous_headings":"","what":"Multi-Agent Systems","title":"Getting Started with deputy","text":"complex tasks, can create lead agent delegates specialized sub-agents:","code":"# Define specialized sub-agents code_agent <- agent_definition(   name = \"code_analyst\",   description = \"Analyzes R code and suggests improvements\",   prompt = \"You are an expert R programmer. Analyze code for best practices.\",   tools = tools_file() )  data_agent <- agent_definition(   name = \"data_analyst\",   description = \"Analyzes data files and provides statistical summaries\",   prompt = \"You are a data analyst. Provide clear statistical insights.\",   tools = tools_data() )  # Create a lead agent that can delegate lead <- LeadAgent$new(   chat = ellmer::chat(\"openai\"),   sub_agents = list(code_agent, data_agent),   system_prompt = \"You coordinate between specialized agents to complete tasks.\" )  # The lead agent will automatically delegate to sub-agents as needed result <- lead$run_sync(   \"Review the R code in src/ and analyze the data in data/\" )"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"working-with-results","dir":"Articles","previous_headings":"","what":"Working with Results","title":"Getting Started with deputy","text":"AgentResult object contains useful information:","code":"result <- agent$run_sync(\"Analyze this project\")  # The final response cat(result$response)  # Cost information result$cost #> $input #> [1] 1250 #> $output #> [1] 450 #> $total #> [1] 0.0045  # Execution duration result$duration #> [1] 3.45  # seconds  # Stop reason result$stop_reason #> [1] \"complete\"  # All events (for detailed analysis) length(result$events) #> [1] 12"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"provider-support","dir":"Articles","previous_headings":"","what":"Provider Support","title":"Getting Started with deputy","text":"deputy works LLM provider ellmer supports:","code":"# OpenAI agent <- Agent$new(chat = ellmer::chat(\"openai\"))  # Anthropic agent <- Agent$new(chat = ellmer::chat(\"anthropic/claude-sonnet-4-5-20250929\"))  # Google agent <- Agent$new(chat = ellmer::chat(\"google/gemini-1.5-pro\"))  # Local models via Ollama agent <- Agent$new(chat = ellmer::chat(\"ollama/llama3.1\"))"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"best-practices","dir":"Articles","previous_headings":"","what":"Best Practices","title":"Getting Started with deputy","text":"Start minimal permissions - Use permissions_readonly() permissions_standard() expand needed. Use hooks logging - Add PostToolUse hook track agent . Set cost limits - Use max_cost_usd permissions prevent runaway costs. Save sessions - long-running tasks, save sessions periodically. Use streaming UX - run() method provides real-time feedback.","code":"# Example combining best practices agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_file(),   permissions = Permissions$new(     file_write = getwd(),     max_turns = 20,     max_cost_usd = 1.00   ) )  agent$add_hook(HookMatcher$new(   event = \"PostToolUse\",   callback = function(tool_name, tool_result, context) {     message(sprintf(\"[%s] %s\", Sys.time(), tool_name))     HookResultPostToolUse()   } ))  for (event in agent$run(\"Organize the files in this directory\")) {   if (event$type == \"text\") cat(event$text) }"},{"path":"https://jameshwade.github.io/deputy/articles/getting-started.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Getting Started with deputy","text":"See vignette(\"tools\") creating custom tools See vignette(\"hooks\") advanced hook patterns See vignette(\"multi-agent\") complex agent orchestration","code":""},{"path":"https://jameshwade.github.io/deputy/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"James Wade. Author, maintainer.","code":""},{"path":"https://jameshwade.github.io/deputy/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Wade J (2026). deputy: Agentic AI Workflows R. R package version 0.0.0.9000, https://github.com/JamesHWade/deputy.","code":"@Manual{,   title = {deputy: Agentic AI Workflows for R},   author = {James Wade},   year = {2026},   note = {R package version 0.0.0.9000},   url = {https://github.com/JamesHWade/deputy}, }"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"deputy-","dir":"","previous_headings":"","what":"Agentic AI Workflows for R","title":"Agentic AI Workflows for R","text":"deputy R implementation Anthropic’s Claude Agent SDK, built ellmer. enables create AI agents can use tools accomplish multi-step tasks, built-support permissions, hooks, streaming output. Note: package aims bring patterns capabilities Claude Agent SDK R ecosystem. inspired Anthropic’s SDK, deputy provider-agnostic works LLM ellmer supports.","code":""},{"path":"https://jameshwade.github.io/deputy/index.html","id":"features","dir":"","previous_headings":"","what":"Features","title":"Agentic AI Workflows for R","text":"Provider-agnostic - Works OpenAI, Anthropic, Google, Ollama, provider ellmer supports Tool bundles - Pre-built tools file operations, code execution, data analysis Permission system - Fine-grained control agents can Hooks - Intercept customize agent behavior key points Streaming output - Real-time feedback agents work Multi-agent - Coordinate specialized sub-agents complex tasks Session persistence - Save restore agent conversations","code":""},{"path":"https://jameshwade.github.io/deputy/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Agentic AI Workflows for R","text":"can install development version deputy GitHub: ’ll also need ellmer:","code":"# install.packages(\"pak\") pak::pak(\"JamesHWade/deputy\") pak::pak(\"tidyverse/ellmer\")"},{"path":[]},{"path":"https://jameshwade.github.io/deputy/index.html","id":"create-an-agent","dir":"","previous_headings":"Quick Start","what":"Create an Agent","title":"Agentic AI Workflows for R","text":"","code":"library(deputy)  # Create an agent with file tools agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_file() )  # Run a task (blocking) result <- agent$run_sync(\"What R files are in the current directory?\") cat(result$response)"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"streaming-output","dir":"","previous_headings":"Quick Start","what":"Streaming Output","title":"Agentic AI Workflows for R","text":"real-time feedback agent works:","code":"for (event in agent$run(\"Analyze the structure of this project\")) {   switch(     event$type,     \"text\" = cat(event$text),     \"tool_start\" = message(\"Calling \", event$tool_name, \"...\"),     \"stop\" = message(\"\\nDone! Cost: $\", round(event$cost$total, 4))   ) }"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"tools","dir":"","previous_headings":"Quick Start","what":"Tools","title":"Agentic AI Workflows for R","text":"deputy provides tool presets common use cases:","code":"# Use presets for quick setup tools_preset(\"minimal\")   # read_file, list_files tools_preset(\"standard\")  # + write_file, run_r_code tools_preset(\"dev\")       # + run_bash (full development) tools_preset(\"data\")      # read_file, list_files, read_csv, run_r_code tools_preset(\"full\")      # all tools  # Or use individual bundles tools_file()  # File operations tools_code()  # Code execution tools_data()  # Data reading tools_all()   # Everything  # List available presets list_presets()"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"permissions","dir":"","previous_headings":"Quick Start","what":"Permissions","title":"Agentic AI Workflows for R","text":"Control agent can : set, tool_denylist takes precedence tool_allowlist. permission_prompt_tool_name always allowed included deny messages model can request explicit approval.","code":"# Read-only: no writes, no code execution agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_file(),   permissions = permissions_readonly() )  # Standard: file read/write in working dir, R code, no bash agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_file(),   permissions = permissions_standard() )  # Custom permissions with limits agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_all(),   permissions = Permissions$new(     file_write = getwd(),     bash = FALSE,     r_code = TRUE,     max_turns = 10,     max_cost_usd = 0.50   ) )  # Claude SDK-style tool policy gates agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_all(),   permissions = Permissions$new(     tool_allowlist = c(\"read_file\", \"list_files\", \"run_r_code\"),     tool_denylist = c(\"run_bash\"),     permission_prompt_tool_name = \"AskUserQuestion\"   ) )"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"hooks","dir":"","previous_headings":"Quick Start","what":"Hooks","title":"Agentic AI Workflows for R","text":"Intercept agent behavior:","code":"# Log all tool calls agent$add_hook(HookMatcher$new(   event = \"PostToolUse\",   callback = function(tool_name, tool_result, context) {     message(\"[\", Sys.time(), \"] \", tool_name)     HookResultPostToolUse()   } ))  # Block dangerous bash commands agent$add_hook(HookMatcher$new(   event = \"PreToolUse\",   pattern = \"^run_bash$\",   callback = function(tool_name, tool_input, context) {     if (grepl(\"rm -rf|sudo\", tool_input$command)) {       HookResultPreToolUse(permission = \"deny\", reason = \"Dangerous command\")     } else {       HookResultPreToolUse(permission = \"allow\")     }   } ))  # Track session lifecycle for metrics/logging agent$add_hook(HookMatcher$new(   event = \"SessionStart\",   callback = function(context) {     message(\"Session started with \", context$tools_count, \" tools\")     HookResultSessionStart()   } ))  agent$add_hook(HookMatcher$new(   event = \"SessionEnd\",   callback = function(reason, context) {     message(\"Session ended: \", reason, \" after \", context$total_turns, \" turns\")     HookResultSessionEnd()   } ))"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"skills","dir":"","previous_headings":"Quick Start","what":"Skills","title":"Agentic AI Workflows for R","text":"Skills bundle tools prompt extensions. can load disk create programmatically. deputy ships built-example skill inst/skills.","code":"# Discover bundled skills skills_dir <- system.file(\"skills\", package = \"deputy\") skills_list(skills_dir)  # Load a skill by path agent$load_skill(file.path(skills_dir, \"data_analysis\"))  # Inspect loaded skills agent$skills()  # Create and load a skill programmatically custom <- skill_create(   name = \"my_skill\",   description = \"Custom helpers\",   prompt = \"You are a focused assistant for project-specific tasks.\" ) agent$load_skill(custom)"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"claude-settings-settingsources","dir":"","previous_headings":"Quick Start","what":"Claude Settings (settingSources)","title":"Agentic AI Workflows for R","text":"deputy can load Claude-style settings .claude directories, including CLAUDE.md memory, .claude/skills, .claude/commands slash commands. Tool policy settings settings.json also applied agent$permissions (allowedTools, disallowedTools, permissionPromptToolName). Example .claude/settings.json tool policy:","code":"agent <- Agent$new(   chat = ellmer::chat(\"openai\"),   tools = tools_file(),   setting_sources = c(\"project\", \"user\") )  # Inspect loaded slash commands agent$slash_commands() {   \"allowedTools\": [\"read_file\", \"list_files\", \"run_r_code\"],   \"disallowedTools\": [\"run_bash\"],   \"permissionPromptToolName\": \"AskUserQuestion\" }"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"structured-output","dir":"","previous_headings":"Quick Start","what":"Structured Output","title":"Agentic AI Workflows for R","text":"Request JSON output matches schema:","code":"schema <- list(   type = \"object\",   properties = list(status = list(type = \"string\")),   required = list(\"status\") )  result <- agent$run_sync(   \"Respond with status = ok\",   output_format = list(type = \"json_schema\", schema = schema) )  result$structured_output"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"error-handling","dir":"","previous_headings":"Quick Start","what":"Error Handling","title":"Agentic AI Workflows for R","text":"deputy provides structured error types programmatic error handling:","code":"# Catch specific error types tryCatch(   agent$run_sync(\"task\"),   deputy_budget_exceeded = function(e) {     message(\"Budget exceeded: $\", e$current_cost, \" > $\", e$max_cost)   },   deputy_session_load = function(e) {     message(\"Failed to load session from: \", e$path)   },   deputy_error = function(e) {     message(\"Deputy error: \", conditionMessage(e))   } )"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"multi-agent-systems","dir":"","previous_headings":"Quick Start","what":"Multi-Agent Systems","title":"Agentic AI Workflows for R","text":"Coordinate specialized agents:","code":"# Define sub-agents code_agent <- agent_definition(   name = \"code_analyst\",   description = \"Analyzes R code\",   prompt = \"You are an expert R programmer.\",   tools = tools_file() )  # Create lead agent that can delegate lead <- LeadAgent$new(   chat = ellmer::chat(\"openai\"),   sub_agents = list(code_agent) )  result <- lead$run_sync(\"Review the R code in this project\")"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"provider-support","dir":"","previous_headings":"","what":"Provider Support","title":"Agentic AI Workflows for R","text":"deputy works LLM provider ellmer supports:","code":"# OpenAI Agent$new(chat = ellmer::chat(\"openai\"))  # Anthropic Agent$new(chat = ellmer::chat(\"anthropic\"))  # Google Agent$new(chat = ellmer::chat(\"google_gemini\"))  # Local via Ollama Agent$new(chat = ellmer::chat(\"ollama/llama3.2\"))"},{"path":"https://jameshwade.github.io/deputy/index.html","id":"learn-more","dir":"","previous_headings":"","what":"Learn More","title":"Agentic AI Workflows for R","text":"vignette(\"getting-started\") - Comprehensive introduction ellmer documentation - Underlying LLM framework","code":""},{"path":"https://jameshwade.github.io/deputy/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Agentic AI Workflows for R","text":"MIT","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":null,"dir":"Reference","previous_headings":"","what":"Agent R6 Class — Agent","title":"Agent R6 Class — Agent","text":"main class creating AI agents can use tools accomplish tasks. Agent wraps ellmer Chat object adds agentic capabilities including multi-turn execution, permission enforcement, streaming output.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"skill-methods","dir":"Reference","previous_headings":"","what":"Skill Methods","title":"Agent R6 Class — Agent","text":"following methods manage skills: $load_skill(skill, allow_conflicts = FALSE) Load Skill agent. skill parameter can Skill object path skill directory. allow_conflicts FALSE (default), error thrown skill tools conflict existing tools. Set TRUE allow overwriting. Returns invisible self. $skills() Get named list loaded Skill objects.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"mcp-methods","dir":"Reference","previous_headings":"","what":"MCP Methods","title":"Agent R6 Class — Agent","text":"following methods manage MCP (Model Context Protocol) server tools: $load_mcp(config = NULL, servers = NULL) Load tools MCP servers. config parameter specifies path MCP config file (defaults ~/.config/mcptools/config.json). servers parameter optionally filters specific server names. Requires mcptools package. Returns invisible self. $mcp_tools() Get names loaded MCP tools.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"Agent R6 Class — Agent","text":"chat wrapped ellmer Chat object permissions Permission policy agent working_dir Working directory file operations hooks Hook registry lifecycle events","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Agent R6 Class — Agent","text":"Agent$new() Agent$run() Agent$run_sync() Agent$register_tool() Agent$register_tools() Agent$add_hook() Agent$turns() Agent$last_turn() Agent$cost() Agent$provider() Agent$save_session() Agent$load_session() Agent$compact() Agent$print() Agent$load_skill() Agent$skills() Agent$slash_commands() Agent$settings() Agent$load_mcp() Agent$mcp_tools() Agent$clone()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Agent R6 Class — Agent","text":"Create new Agent.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$new(   chat,   tools = list(),   system_prompt = NULL,   permissions = NULL,   working_dir = getwd(),   setting_sources = NULL,   settings = NULL )"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"chat ellmer Chat object created ellmer::chat() provider-specific functions like ellmer::chat_openai(). tools list tools created ellmer::tool(). See tools_file() tools_code() built-tool bundles. system_prompt Optional system prompt. provided, overrides chat object's existing system prompt. permissions Permissions object controlling agent can . Defaults permissions_standard(). working_dir Working directory file operations. Defaults current directory. setting_sources Optional character vector Claude-style setting sources (e.g., \"project\", \"user\") used load memory, skills, slash commands. settings Optional pre-loaded settings list claude_settings_load(). provided, bypasses setting_sources.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"new Agent object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-run-","dir":"Reference","previous_headings":"","what":"Method run()","title":"Agent R6 Class — Agent","text":"Run agentic task streaming output. Returns generator yields AgentEvent objects agent works. agent continue task complete, max_turns reached, cost limit exceeded.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$run(   task,   max_turns = NULL,   include_partial_messages = TRUE,   output_format = NULL )"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"task task agent perform max_turns Maximum number turns (default: permissions) include_partial_messages TRUE (default), yield partial text chunks stream. FALSE, yield text_complete. output_format Optional output format spec (e.g. JSON schema) guide validate structured responses.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"generator yielding AgentEvent objects","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-run-sync-","dir":"Reference","previous_headings":"","what":"Method run_sync()","title":"Agent R6 Class — Agent","text":"Run agentic task block completion. Convenience wrapper around run() collects events returns AgentResult.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$run_sync(   task,   max_turns = NULL,   include_partial_messages = TRUE,   output_format = NULL )"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"task task agent perform max_turns Maximum number turns (default: permissions) include_partial_messages TRUE (default), keep partial text events. FALSE, suppress partials. output_format Optional output format spec (e.g. JSON schema) guide validate structured responses.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"AgentResult object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-register-tool-","dir":"Reference","previous_headings":"","what":"Method register_tool()","title":"Agent R6 Class — Agent","text":"Register tool agent.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$register_tool(tool)"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"tool tool created ellmer::tool()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Invisible self chaining","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-register-tools-","dir":"Reference","previous_headings":"","what":"Method register_tools()","title":"Agent R6 Class — Agent","text":"Register multiple tools agent.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$register_tools(tools)"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"tools list tools created ellmer::tool()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-4","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Invisible self chaining","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-add-hook-","dir":"Reference","previous_headings":"","what":"Method add_hook()","title":"Agent R6 Class — Agent","text":"Add hook agent. Hooks called specific points agent execution can modify behavior (e.g., deny tool calls, log events).","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$add_hook(hook)"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"hook HookMatcher object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-5","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Invisible self chaining","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Agent R6 Class — Agent","text":"","code":"\\dontrun{ # Add a hook to block dangerous bash commands agent$add_hook(hook_block_dangerous_bash())  # Add a custom PreToolUse hook agent$add_hook(HookMatcher$new(   event = \"PreToolUse\",   pattern = \"^write_file$\",   callback = function(tool_name, tool_input, context) {     cli::cli_alert_info(\"Writing to: {tool_input$path}\")     HookResultPreToolUse(permission = \"allow\")   } )) }"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-turns-","dir":"Reference","previous_headings":"","what":"Method turns()","title":"Agent R6 Class — Agent","text":"Get conversation history.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$turns()"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-6","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"list Turn objects","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-last-turn-","dir":"Reference","previous_headings":"","what":"Method last_turn()","title":"Agent R6 Class — Agent","text":"Get last turn conversation.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$last_turn(role = \"assistant\")"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"role Role filter (\"assistant\", \"user\", \"system\")","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-7","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Turn object NULL","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-cost-","dir":"Reference","previous_headings":"","what":"Method cost()","title":"Agent R6 Class — Agent","text":"Get cost information conversation.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$cost()"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-8","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"list input, output, cached, total token costs","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-provider-","dir":"Reference","previous_headings":"","what":"Method provider()","title":"Agent R6 Class — Agent","text":"Get provider information.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$provider()"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-9","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"list provider name model","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-save-session-","dir":"Reference","previous_headings":"","what":"Method save_session()","title":"Agent R6 Class — Agent","text":"Save current session RDS file.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$save_session(path)"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"path Path save session","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Agent R6 Class — Agent","text":"session file contains: Conversation turns System prompt Tool definitions (serialized) Permissions configuration Working directory Metadata (timestamp, version, provider info)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-10","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Invisible path","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-load-session-","dir":"Reference","previous_headings":"","what":"Method load_session()","title":"Agent R6 Class — Agent","text":"Load session RDS file.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$load_session(path, restore_tools = TRUE)"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"path Path session file restore_tools TRUE (default), restore tools session","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"details-1","dir":"Reference","previous_headings":"","what":"Details","title":"Agent R6 Class — Agent","text":"Note: Hooks restored sessions contain function closures may serialize correctly.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-11","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Invisible self","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-compact-","dir":"Reference","previous_headings":"","what":"Method compact()","title":"Agent R6 Class — Agent","text":"Compact conversation history reduce context size. method uses LLM generate meaningful summary older conversation turns, replaces summary appended system prompt. preserves important context reducing token usage.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-12","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$compact(keep_last = 4, summary = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"keep_last Number recent turns keep uncompacted (default: 4) summary Optional custom summary use instead auto-generating. NULL, LLM generate summary focusing key decisions, findings, files discussed, task progress.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"details-2","dir":"Reference","previous_headings":"","what":"Details","title":"Agent R6 Class — Agent","text":"compaction process: Fires PreCompact hook (can cancel provide custom summary) custom summary, uses LLM summarize compacted turns Appends summary system prompt \"Previous Conversation Summary\" Keeps recent keep_last turns LLM summarization fails (e.g., API key), falls back simple text-based summary truncated turn contents.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-12","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Invisible self","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"Agent R6 Class — Agent","text":"Print agent configuration.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-13","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$print()"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-load-skill-","dir":"Reference","previous_headings":"","what":"Method load_skill()","title":"Agent R6 Class — Agent","text":"Load Skill agent.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-14","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$load_skill(skill, allow_conflicts = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-10","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"skill Skill object path skill directory. allow_conflicts FALSE (default), error tool name conflicts. Set TRUE allow overwriting existing tools.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-13","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Invisible self chaining.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-skills-","dir":"Reference","previous_headings":"","what":"Method skills()","title":"Agent R6 Class — Agent","text":"Get loaded skills.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-15","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$skills()"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-14","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Named list loaded Skill objects.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-slash-commands-","dir":"Reference","previous_headings":"","what":"Method slash_commands()","title":"Agent R6 Class — Agent","text":"Get registered slash commands.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-16","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$slash_commands()"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-15","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Named list slash command definitions","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-settings-","dir":"Reference","previous_headings":"","what":"Method settings()","title":"Agent R6 Class — Agent","text":"Get applied Claude-style settings.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-17","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$settings()"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-16","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Settings list returned claude_settings_load()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-load-mcp-","dir":"Reference","previous_headings":"","what":"Method load_mcp()","title":"Agent R6 Class — Agent","text":"Load tools MCP (Model Context Protocol) servers. Requires mcptools package. Issues warning installed tool fetching fails.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-18","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$load_mcp(config = NULL, servers = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-11","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"config Path MCP configuration file. NULL (default), uses mcptools default location (~/.config/mcptools/config.json). servers Optional character vector server names load . NULL, loads configured servers.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-17","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Invisible self chaining","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-mcp-tools-","dir":"Reference","previous_headings":"","what":"Method mcp_tools()","title":"Agent R6 Class — Agent","text":"Get names loaded MCP tools.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-19","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$mcp_tools()"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"returns-18","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent R6 Class — Agent","text":"Character vector MCP tool names","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"Agent R6 Class — Agent","text":"objects class cloneable method.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"usage-20","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent R6 Class — Agent","text":"","code":"Agent$clone(deep = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"arguments-12","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent R6 Class — Agent","text":"deep Whether make deep clone.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Agent.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Agent R6 Class — Agent","text":"","code":"if (FALSE) { # \\dontrun{ # Create an agent with file tools agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = tools_file() )  # Run a task with streaming output for (event in agent$run(\"List files in the current directory\")) {   if (event$type == \"text\") cat(event$text) }  # Or use the blocking convenience method result <- agent$run_sync(\"List files\") print(result$response) } # }  ## ------------------------------------------------ ## Method `Agent$add_hook` ## ------------------------------------------------  if (FALSE) { # \\dontrun{ # Add a hook to block dangerous bash commands agent$add_hook(hook_block_dangerous_bash())  # Add a custom PreToolUse hook agent$add_hook(HookMatcher$new(   event = \"PreToolUse\",   pattern = \"^write_file$\",   callback = function(tool_name, tool_input, context) {     cli::cli_alert_info(\"Writing to: {tool_input$path}\")     HookResultPreToolUse(permission = \"allow\")   } )) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/AgentEvent.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an agent event — AgentEvent","title":"Create an agent event — AgentEvent","text":"Agent events yielded run() generator provide streaming updates agent progress.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentEvent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an agent event — AgentEvent","text":"","code":"AgentEvent(type, ...)"},{"path":"https://jameshwade.github.io/deputy/reference/AgentEvent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an agent event — AgentEvent","text":"type Event type (see Event Types section) ... Additional event data","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentEvent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an agent event — AgentEvent","text":"AgentEvent object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentEvent.html","id":"event-types","dir":"Reference","previous_headings":"","what":"Event Types","title":"Create an agent event — AgentEvent","text":"\"start\" - Task started. Contains: task \"tool_start\" - Tool execution starting. Contains: tool_name, tool_input \"tool_end\" - Tool execution completed. Contains: tool_name, tool_result, tool_error \"text\" - Text chunk LLM. Contains: text, is_complete \"text_complete\" - Full text response. Contains: text \"turn\" - Turn completed. Contains: turn, turn_number \"warning\" - Warning condition occurred. Contains: message, details \"stop\" - Agent stopped. Contains: reason, total_turns, cost","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentEvent.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an agent event — AgentEvent","text":"","code":"# Create a start event AgentEvent(\"start\", task = \"Analyze data.csv\") #> <AgentEvent: start > #>   timestamp: 2026-02-07 01:43:16  #>   task: Analyze data.csv  # Create a text event AgentEvent(\"text\", text = \"Hello\", is_complete = FALSE ) #> <AgentEvent: text > #>   timestamp: 2026-02-07 01:43:16  #>   text: Hello #>   is_complete: FALSE"},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":null,"dir":"Reference","previous_headings":"","what":"Agent Result R6 Class — AgentResult","title":"Agent Result R6 Class — AgentResult","text":"Contains result agent task execution, including final response, conversation history, cost information, events occurred execution.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"Agent Result R6 Class — AgentResult","text":"response final text response agent turns List conversation turns cost Cost information (list input, output, cached, total) events List AgentEvent objects execution duration Execution duration seconds stop_reason Reason agent stopped structured_output Parsed/validated structured output (requested)","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Agent Result R6 Class — AgentResult","text":"AgentResult$new() AgentResult$n_turns() AgentResult$tool_calls() AgentResult$text_chunks() AgentResult$is_success() AgentResult$print() AgentResult$clone()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Agent Result R6 Class — AgentResult","text":"Create new AgentResult object.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent Result R6 Class — AgentResult","text":"","code":"AgentResult$new(   response = NULL,   turns = list(),   cost = list(input = 0, output = 0, cached = 0, total = 0),   events = list(),   duration = NULL,   stop_reason = \"complete\",   structured_output = NULL )"},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent Result R6 Class — AgentResult","text":"response Final text response turns List conversation turns cost Cost information events List AgentEvent objects duration Execution duration seconds stop_reason Reason stopping structured_output Parsed structured output ()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent Result R6 Class — AgentResult","text":"new AgentResult object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"method-n-turns-","dir":"Reference","previous_headings":"","what":"Method n_turns()","title":"Agent Result R6 Class — AgentResult","text":"Get number turns conversation.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent Result R6 Class — AgentResult","text":"","code":"AgentResult$n_turns()"},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent Result R6 Class — AgentResult","text":"Integer count turns","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"method-tool-calls-","dir":"Reference","previous_headings":"","what":"Method tool_calls()","title":"Agent Result R6 Class — AgentResult","text":"Get tool calls made execution.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent Result R6 Class — AgentResult","text":"","code":"AgentResult$tool_calls()"},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent Result R6 Class — AgentResult","text":"List tool_start events","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"method-text-chunks-","dir":"Reference","previous_headings":"","what":"Method text_chunks()","title":"Agent Result R6 Class — AgentResult","text":"Get text chunks response.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent Result R6 Class — AgentResult","text":"","code":"AgentResult$text_chunks()"},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent Result R6 Class — AgentResult","text":"Character vector text chunks","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"method-is-success-","dir":"Reference","previous_headings":"","what":"Method is_success()","title":"Agent Result R6 Class — AgentResult","text":"Check agent completed successfully.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent Result R6 Class — AgentResult","text":"","code":"AgentResult$is_success()"},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"returns-4","dir":"Reference","previous_headings":"","what":"Returns","title":"Agent Result R6 Class — AgentResult","text":"Logical indicating success","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"Agent Result R6 Class — AgentResult","text":"Print result summary.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent Result R6 Class — AgentResult","text":"","code":"AgentResult$print()"},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"Agent Result R6 Class — AgentResult","text":"objects class cloneable method.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Agent Result R6 Class — AgentResult","text":"","code":"AgentResult$clone(deep = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/AgentResult.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Agent Result R6 Class — AgentResult","text":"deep Whether make deep clone.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookEvent.html","id":null,"dir":"Reference","previous_headings":"","what":"Hook events supported by deputy — HookEvent","title":"Hook events supported by deputy — HookEvent","text":"Hook events fired specific points agent execution. event type specific callback signature context structure.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookEvent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hook events supported by deputy — HookEvent","text":"","code":"HookEvent"},{"path":"https://jameshwade.github.io/deputy/reference/HookEvent.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Hook events supported by deputy — HookEvent","text":"object class character length 8.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookEvent.html","id":"event-types","dir":"Reference","previous_headings":"","what":"Event Types","title":"Hook events supported by deputy — HookEvent","text":"PreToolUse - tool executed (can deny) Callback signature: function(tool_name, tool_input, context) tool_name: Name tool called (character) tool_input: Named list arguments passed tool context: List containing working_dir tool_annotations (available) Return: HookResultPreToolUse() allow/deny PostToolUse - tool completes Callback signature: function(tool_name, tool_result, tool_error, context) tool_name: Name tool called (character) tool_result: Result returned tool (NULL error) tool_error: Error message tool failed (NULL success) context: List containing working_dir (current directory) Return: HookResultPostToolUse() continue/stop Stop - agent stops Callback signature: function(reason, context) reason: agent stopped (\"complete\", \"max_turns\", \"error\") context: List containing working_dir, total_turns, cost Return: HookResultStop() SubagentStop - sub-agent completes (LeadAgent ) Callback signature: function(agent_name, task, result, context) agent_name: Name sub-agent completed (character) task: task delegated (character) result: Result returned sub-agent context: List containing working_dir Return: HookResultSubagentStop() UserPromptSubmit - user prompt submitted Callback signature: function(prompt, context) prompt: user's prompt text (character) context: List containing working_dir Return: NULL (informational ) PreCompact - conversation compaction Callback signature: function(turns_to_compact, turns_to_keep, context) turns_to_compact: List turns compacted summary turns_to_keep: List recent turns preserved context: List containing working_dir, total_turns, compact_count Return: HookResultPreCompact() allow/cancel provide custom summary SessionStart - agent session begins Callback signature: function(context) context: List containing working_dir, permissions, provider, tools_count Return: HookResultSessionStart() SessionEnd - agent session ends Callback signature: function(reason, context) reason: agent stopped (\"complete\", \"max_turns\", \"cost_limit\", \"hook_requested_stop\") context: List containing working_dir, total_turns, cost Return: HookResultSessionEnd()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookEvent.html","id":"context-structure","dir":"Reference","previous_headings":"","what":"Context Structure","title":"Hook events supported by deputy — HookEvent","text":"context parameter always named list. Common fields: working_dir: agent's current working directory tool_annotations: (PreToolUse ) Tool annotations ellmer available total_turns: (Stop, PreCompact, SessionEnd) Number turns conversation cost: (Stop, SessionEnd) List total, input_tokens, output_tokens compact_count: (PreCompact ) Number turns compacted permissions: (SessionStart ) agent's permissions configuration provider: (SessionStart ) List name model tools_count: (SessionStart ) Number registered tools","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookEvent.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Hook events supported by deputy — HookEvent","text":"","code":"if (FALSE) { # \\dontrun{ # PreToolUse callback example agent$add_hook(HookMatcher$new(   event = \"PreToolUse\",   callback = function(tool_name, tool_input, context) {     message(\"Tool: \", tool_name, \" in \", context$working_dir)     HookResultPreToolUse(permission = \"allow\")   } ))  # PostToolUse callback example agent$add_hook(HookMatcher$new(   event = \"PostToolUse\",   callback = function(tool_name, tool_result, tool_error, context) {     if (!is.null(tool_error)) {       warning(\"Tool failed: \", tool_error)     }     HookResultPostToolUse()   } )) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":null,"dir":"Reference","previous_headings":"","what":"HookMatcher R6 Class — HookMatcher","title":"HookMatcher R6 Class — HookMatcher","text":"Defines hook callback triggered. Hooks can filtered event type optionally tool name pattern.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"HookMatcher R6 Class — HookMatcher","text":"event hook event type (see HookEvent) pattern Optional regex pattern tool name filtering callback function call hook fires timeout Maximum execution time callback seconds","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"HookMatcher R6 Class — HookMatcher","text":"HookMatcher$new() HookMatcher$matches() HookMatcher$print() HookMatcher$clone()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"HookMatcher R6 Class — HookMatcher","text":"Create new HookMatcher.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"HookMatcher R6 Class — HookMatcher","text":"","code":"HookMatcher$new(event, callback, pattern = NULL, timeout = 30)"},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"HookMatcher R6 Class — HookMatcher","text":"event event type (must one HookEvent) callback Function call. Signature depends event type: PreToolUse: function(tool_name, tool_input, context) PostToolUse: function(tool_name, tool_result, tool_error, context) Stop: function(reason, context) SubagentStop: function(agent_name, task, result, context) UserPromptSubmit: function(prompt, context) PreCompact: function(turns_to_compact, turns_to_keep, context) SessionStart: function(context) SessionEnd: function(reason, context) pattern Optional regex pattern filter tool name. applies PreToolUse PostToolUse events. timeout Maximum callback execution time seconds","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"HookMatcher R6 Class — HookMatcher","text":"new HookMatcher object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"examples","dir":"Reference","previous_headings":"","what":"Examples","title":"HookMatcher R6 Class — HookMatcher","text":"","code":"\\dontrun{ # Block dangerous bash commands HookMatcher$new(   event = \"PreToolUse\",   pattern = \"^(run_bash|bash)$\",   callback = function(tool_name, tool_input, context) {     if (grepl(\"rm -rf\", tool_input$command)) {       HookResultPreToolUse(permission = \"deny\", reason = \"Dangerous!\")     } else {       HookResultPreToolUse(permission = \"allow\")     }   } ) }"},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"method-matches-","dir":"Reference","previous_headings":"","what":"Method matches()","title":"HookMatcher R6 Class — HookMatcher","text":"Check hook matches given tool name.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"HookMatcher R6 Class — HookMatcher","text":"","code":"HookMatcher$matches(tool_name = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"HookMatcher R6 Class — HookMatcher","text":"tool_name tool name check (can NULL)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"HookMatcher R6 Class — HookMatcher","text":"Logical indicating hook matches","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"HookMatcher R6 Class — HookMatcher","text":"Print hook matcher.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"HookMatcher R6 Class — HookMatcher","text":"","code":"HookMatcher$print()"},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"HookMatcher R6 Class — HookMatcher","text":"objects class cloneable method.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"HookMatcher R6 Class — HookMatcher","text":"","code":"HookMatcher$clone(deep = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"HookMatcher R6 Class — HookMatcher","text":"deep Whether make deep clone.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookMatcher.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"HookMatcher R6 Class — HookMatcher","text":"","code":"## ------------------------------------------------ ## Method `HookMatcher$new` ## ------------------------------------------------  if (FALSE) { # \\dontrun{ # Block dangerous bash commands HookMatcher$new(   event = \"PreToolUse\",   pattern = \"^(run_bash|bash)$\",   callback = function(tool_name, tool_input, context) {     if (grepl(\"rm -rf\", tool_input$command)) {       HookResultPreToolUse(permission = \"deny\", reason = \"Dangerous!\")     } else {       HookResultPreToolUse(permission = \"allow\")     }   } ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":null,"dir":"Reference","previous_headings":"","what":"HookRegistry R6 Class — HookRegistry","title":"HookRegistry R6 Class — HookRegistry","text":"Manages collection hooks agent. Handles registration, matching, execution hooks.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"HookRegistry R6 Class — HookRegistry","text":"HookRegistry$new() HookRegistry$add() HookRegistry$get_hooks() HookRegistry$fire() HookRegistry$last_errors() HookRegistry$clear_errors() HookRegistry$count() HookRegistry$print() HookRegistry$clone()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"HookRegistry R6 Class — HookRegistry","text":"Create new HookRegistry.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"HookRegistry R6 Class — HookRegistry","text":"","code":"HookRegistry$new()"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"method-add-","dir":"Reference","previous_headings":"","what":"Method add()","title":"HookRegistry R6 Class — HookRegistry","text":"Add hook registry.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"HookRegistry R6 Class — HookRegistry","text":"","code":"HookRegistry$add(hook)"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"HookRegistry R6 Class — HookRegistry","text":"hook HookMatcher object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"HookRegistry R6 Class — HookRegistry","text":"Invisible self chaining","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"method-get-hooks-","dir":"Reference","previous_headings":"","what":"Method get_hooks()","title":"HookRegistry R6 Class — HookRegistry","text":"Get hooks specific event.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"HookRegistry R6 Class — HookRegistry","text":"","code":"HookRegistry$get_hooks(event, tool_name = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"HookRegistry R6 Class — HookRegistry","text":"event event type tool_name Optional tool name filtering","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"HookRegistry R6 Class — HookRegistry","text":"List matching HookMatcher objects","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"method-fire-","dir":"Reference","previous_headings":"","what":"Method fire()","title":"HookRegistry R6 Class — HookRegistry","text":"Fire hooks event return first non-NULL result. Hook errors handled follows: PreToolUse: Errors result denial (fail-safe security behavior) events: Errors logged prominently stored last_errors field, execution continues prevent cascade failures","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"HookRegistry R6 Class — HookRegistry","text":"","code":"HookRegistry$fire(event, tool_name = NULL, ...)"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"HookRegistry R6 Class — HookRegistry","text":"event event type tool_name Optional tool name filtering (also passed callback) ... Arguments pass callback","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"HookRegistry R6 Class — HookRegistry","text":"first non-NULL hook result, NULL","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"method-last-errors-","dir":"Reference","previous_headings":"","what":"Method last_errors()","title":"HookRegistry R6 Class — HookRegistry","text":"Get errors recent hook executions. Useful programmatic checking hook health, especially audit/logging hooks failures logged fatal.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"HookRegistry R6 Class — HookRegistry","text":"","code":"HookRegistry$last_errors()"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"HookRegistry R6 Class — HookRegistry","text":"List error records, containing event, tool_name, error, timestamp","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"method-clear-errors-","dir":"Reference","previous_headings":"","what":"Method clear_errors()","title":"HookRegistry R6 Class — HookRegistry","text":"Clear error history.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"HookRegistry R6 Class — HookRegistry","text":"","code":"HookRegistry$clear_errors()"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"method-count-","dir":"Reference","previous_headings":"","what":"Method count()","title":"HookRegistry R6 Class — HookRegistry","text":"Get number registered hooks.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"HookRegistry R6 Class — HookRegistry","text":"","code":"HookRegistry$count()"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"returns-4","dir":"Reference","previous_headings":"","what":"Returns","title":"HookRegistry R6 Class — HookRegistry","text":"Integer count","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"HookRegistry R6 Class — HookRegistry","text":"Print registry.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"HookRegistry R6 Class — HookRegistry","text":"","code":"HookRegistry$print()"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"HookRegistry R6 Class — HookRegistry","text":"objects class cloneable method.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"HookRegistry R6 Class — HookRegistry","text":"","code":"HookRegistry$clone(deep = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/HookRegistry.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"HookRegistry R6 Class — HookRegistry","text":"deep Whether make deep clone.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPostToolUse.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a PostToolUse hook result — HookResultPostToolUse","title":"Create a PostToolUse hook result — HookResultPostToolUse","text":"Return PostToolUse hook callback.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPostToolUse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a PostToolUse hook result — HookResultPostToolUse","text":"","code":"HookResultPostToolUse(continue = TRUE)"},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPostToolUse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a PostToolUse hook result — HookResultPostToolUse","text":"continue FALSE, stop agent hook","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPostToolUse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a PostToolUse hook result — HookResultPostToolUse","text":"HookResultPostToolUse object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPostToolUse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a PostToolUse hook result — HookResultPostToolUse","text":"","code":"# Continue execution HookResultPostToolUse() #> $continue #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"HookResultPostToolUse\" \"HookResult\"            \"list\"                   # Stop after this tool HookResultPostToolUse(continue = FALSE) #> $continue #> [1] FALSE #>  #> attr(,\"class\") #> [1] \"HookResultPostToolUse\" \"HookResult\"            \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreCompact.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a PreCompact hook result — HookResultPreCompact","title":"Create a PreCompact hook result — HookResultPreCompact","text":"Return PreCompact hook callback control whether compaction proceed.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreCompact.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a PreCompact hook result — HookResultPreCompact","text":"","code":"HookResultPreCompact(continue = TRUE, summary = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreCompact.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a PreCompact hook result — HookResultPreCompact","text":"continue FALSE, cancels compaction summary Optional custom summary use compaction","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreCompact.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a PreCompact hook result — HookResultPreCompact","text":"HookResultPreCompact object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreCompact.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a PreCompact hook result — HookResultPreCompact","text":"","code":"# Allow compaction HookResultPreCompact() #> $continue #> [1] TRUE #>  #> $summary #> NULL #>  #> attr(,\"class\") #> [1] \"HookResultPreCompact\" \"HookResult\"           \"list\"                  # Cancel compaction HookResultPreCompact(continue = FALSE) #> $continue #> [1] FALSE #>  #> $summary #> NULL #>  #> attr(,\"class\") #> [1] \"HookResultPreCompact\" \"HookResult\"           \"list\"                  # Provide custom summary HookResultPreCompact(summary = \"Previous conversation discussed X, Y, Z.\") #> $continue #> [1] TRUE #>  #> $summary #> [1] \"Previous conversation discussed X, Y, Z.\" #>  #> attr(,\"class\") #> [1] \"HookResultPreCompact\" \"HookResult\"           \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreToolUse.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a PreToolUse hook result — HookResultPreToolUse","title":"Create a PreToolUse hook result — HookResultPreToolUse","text":"Return PreToolUse hook callback control tool execution.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreToolUse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a PreToolUse hook result — HookResultPreToolUse","text":"","code":"HookResultPreToolUse(   permission = c(\"allow\", \"deny\"),   reason = NULL,   continue = TRUE )"},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreToolUse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a PreToolUse hook result — HookResultPreToolUse","text":"permission Either \"allow\" \"deny\" reason Reason denial (shown LLM) continue FALSE, stop agent hook","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreToolUse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a PreToolUse hook result — HookResultPreToolUse","text":"HookResultPreToolUse object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultPreToolUse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a PreToolUse hook result — HookResultPreToolUse","text":"","code":"# Allow a tool call HookResultPreToolUse(permission = \"allow\") #> $permission #> [1] \"allow\" #>  #> $reason #> NULL #>  #> $continue #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"HookResultPreToolUse\" \"HookResult\"           \"list\"                  # Deny a dangerous command HookResultPreToolUse(   permission = \"deny\",   reason = \"Dangerous command pattern detected\" ) #> $permission #> [1] \"deny\" #>  #> $reason #> [1] \"Dangerous command pattern detected\" #>  #> $continue #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"HookResultPreToolUse\" \"HookResult\"           \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionEnd.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a SessionEnd hook result — HookResultSessionEnd","title":"Create a SessionEnd hook result — HookResultSessionEnd","text":"Return SessionEnd hook callback. hook fires end agent session, agent stops reason.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionEnd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a SessionEnd hook result — HookResultSessionEnd","text":"","code":"HookResultSessionEnd(handled = TRUE)"},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionEnd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a SessionEnd hook result — HookResultSessionEnd","text":"handled TRUE, indicates hook handled session end event","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionEnd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a SessionEnd hook result — HookResultSessionEnd","text":"HookResultSessionEnd object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionEnd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a SessionEnd hook result — HookResultSessionEnd","text":"","code":"# Log session end HookResultSessionEnd() #> $handled #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"HookResultSessionEnd\" \"HookResult\"           \"list\"                  # Mark as handled HookResultSessionEnd(handled = TRUE) #> $handled #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"HookResultSessionEnd\" \"HookResult\"           \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionStart.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a SessionStart hook result — HookResultSessionStart","title":"Create a SessionStart hook result — HookResultSessionStart","text":"Return SessionStart hook callback. hook fires beginning agent session, first turn begins.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionStart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a SessionStart hook result — HookResultSessionStart","text":"","code":"HookResultSessionStart(handled = TRUE)"},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionStart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a SessionStart hook result — HookResultSessionStart","text":"handled TRUE, indicates hook handled session start event","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionStart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a SessionStart hook result — HookResultSessionStart","text":"HookResultSessionStart object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSessionStart.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a SessionStart hook result — HookResultSessionStart","text":"","code":"# Log session start HookResultSessionStart() #> $handled #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"HookResultSessionStart\" \"HookResult\"             \"list\"                    # Mark as handled HookResultSessionStart(handled = TRUE) #> $handled #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"HookResultSessionStart\" \"HookResult\"             \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultStop.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Stop hook result — HookResultStop","title":"Create a Stop hook result — HookResultStop","text":"Return Stop hook callback.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultStop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Stop hook result — HookResultStop","text":"","code":"HookResultStop(handled = TRUE)"},{"path":"https://jameshwade.github.io/deputy/reference/HookResultStop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Stop hook result — HookResultStop","text":"handled TRUE, indicates hook handled stop event","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultStop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Stop hook result — HookResultStop","text":"HookResultStop object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSubagentStop.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a SubagentStop hook result — HookResultSubagentStop","title":"Create a SubagentStop hook result — HookResultSubagentStop","text":"Return SubagentStop hook callback. hook fires sub-agent (delegated LeadAgent) completes task.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSubagentStop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a SubagentStop hook result — HookResultSubagentStop","text":"","code":"HookResultSubagentStop(handled = TRUE)"},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSubagentStop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a SubagentStop hook result — HookResultSubagentStop","text":"handled TRUE, indicates hook handled sub-agent completion","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSubagentStop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a SubagentStop hook result — HookResultSubagentStop","text":"HookResultSubagentStop object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/HookResultSubagentStop.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a SubagentStop hook result — HookResultSubagentStop","text":"","code":"# Basic handler HookResultSubagentStop() #> $handled #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"HookResultSubagentStop\" \"HookResult\"             \"list\"                    # Mark as handled HookResultSubagentStop(handled = TRUE) #> $handled #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"HookResultSubagentStop\" \"HookResult\"             \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":null,"dir":"Reference","previous_headings":"","what":"LeadAgent R6 Class — LeadAgent","title":"LeadAgent R6 Class — LeadAgent","text":"LeadAgent agent can delegate tasks specialized sub-agents. automatically delegate_to_agent tool allows spawn sub-agents based registered AgentDefinitions.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"LeadAgent R6 Class — LeadAgent","text":"deputy::Agent -> LeadAgent","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"LeadAgent R6 Class — LeadAgent","text":"sub_agent_defs List AgentDefinition objects","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"LeadAgent R6 Class — LeadAgent","text":"deputy::Agent$add_hook() deputy::Agent$compact() deputy::Agent$cost() deputy::Agent$last_turn() deputy::Agent$load_mcp() deputy::Agent$load_session() deputy::Agent$load_skill() deputy::Agent$mcp_tools() deputy::Agent$provider() deputy::Agent$register_tool() deputy::Agent$register_tools() deputy::Agent$run() deputy::Agent$run_sync() deputy::Agent$save_session() deputy::Agent$settings() deputy::Agent$skills() deputy::Agent$slash_commands() deputy::Agent$turns()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"LeadAgent R6 Class — LeadAgent","text":"LeadAgent$new() LeadAgent$register_sub_agent() LeadAgent$available_sub_agents() LeadAgent$print() LeadAgent$clone()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"LeadAgent R6 Class — LeadAgent","text":"Create new LeadAgent.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"LeadAgent R6 Class — LeadAgent","text":"","code":"LeadAgent$new(   chat,   sub_agents = list(),   tools = list(),   system_prompt = NULL,   permissions = NULL,   working_dir = getwd() )"},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"LeadAgent R6 Class — LeadAgent","text":"chat ellmer Chat object sub_agents List agent_definition() objects tools Additional tools lead agent system_prompt System prompt lead agent permissions Permissions lead agent (also applied sub-agents) working_dir Working directory","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"LeadAgent R6 Class — LeadAgent","text":"new LeadAgent object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"method-register-sub-agent-","dir":"Reference","previous_headings":"","what":"Method register_sub_agent()","title":"LeadAgent R6 Class — LeadAgent","text":"Register new sub-agent definition.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"LeadAgent R6 Class — LeadAgent","text":"","code":"LeadAgent$register_sub_agent(definition)"},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"LeadAgent R6 Class — LeadAgent","text":"definition agent_definition() object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"LeadAgent R6 Class — LeadAgent","text":"Invisible self","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"method-available-sub-agents-","dir":"Reference","previous_headings":"","what":"Method available_sub_agents()","title":"LeadAgent R6 Class — LeadAgent","text":"Get available sub-agent names.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"LeadAgent R6 Class — LeadAgent","text":"","code":"LeadAgent$available_sub_agents()"},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"LeadAgent R6 Class — LeadAgent","text":"Character vector sub-agent names","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"LeadAgent R6 Class — LeadAgent","text":"Print lead agent.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"LeadAgent R6 Class — LeadAgent","text":"","code":"LeadAgent$print()"},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"LeadAgent R6 Class — LeadAgent","text":"objects class cloneable method.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"LeadAgent R6 Class — LeadAgent","text":"","code":"LeadAgent$clone(deep = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/LeadAgent.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"LeadAgent R6 Class — LeadAgent","text":"deep Whether make deep clone.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionMode.html","id":null,"dir":"Reference","previous_headings":"","what":"Permission modes for agent tool access — PermissionMode","title":"Permission modes for agent tool access — PermissionMode","text":"Permission modes control overall behavior tool permission checking: \"default\" - Check tool permission policy \"acceptEdits\" - Auto-accept file write tools \"readonly\" - Deny write/execute tools \"bypassPermissions\" - Allow tools (dangerous, use caution)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionMode.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Permission modes for agent tool access — PermissionMode","text":"","code":"PermissionMode"},{"path":"https://jameshwade.github.io/deputy/reference/PermissionMode.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Permission modes for agent tool access — PermissionMode","text":"object class character length 4.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionMode.html","id":"tool-annotations","dir":"Reference","previous_headings":"","what":"Tool Annotations","title":"Permission modes for agent tool access — PermissionMode","text":"Permissions use tool annotations (ellmer::tool_annotations()) determine tool behavior. Available annotations: read_only_hint (logical, default: FALSE) Indicates tool reads data modify state. Tools read_only_hint = TRUE allowed \"readonly\" mode. Examples: tool_read_file, tool_list_files, tool_search destructive_hint (logical, default: TRUE) Indicates tool may cause destructive/irreversible changes. Tools destructive_hint = TRUE require explicit permission. Examples: tool_write_file, tool_delete_file, tool_run_bash open_world_hint (logical, default: FALSE) Indicates tool may interact external systems. Used network calls, package installation, etc. Examples: tool_web_search, tool_install_package idempotent_hint (logical, default: FALSE) Indicates repeated calls produce result. Safe retry failure.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionMode.html","id":"creating-tools-with-annotations","dir":"Reference","previous_headings":"","what":"Creating Tools with Annotations","title":"Permission modes for agent tool access — PermissionMode","text":"","code":"# Read-only tool tool_search <- ellmer::tool(   fun = function(pattern) grep(pattern, files),   name = \"search\",   description = \"Search for pattern\",   arguments = list(pattern = ellmer::type_string(\"Search pattern\")),   annotations = ellmer::tool_annotations(     read_only_hint = TRUE,     destructive_hint = FALSE   ) )  # Destructive tool tool_delete <- ellmer::tool(   fun = function(path) unlink(path),   name = \"delete\",   description = \"Delete a file\",   arguments = list(path = ellmer::type_string(\"File path\")),   annotations = ellmer::tool_annotations(     read_only_hint = FALSE,     destructive_hint = TRUE   ) )"},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultAllow.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an allow permission result — PermissionResultAllow","title":"Create an allow permission result — PermissionResultAllow","text":"Returns permission result allows tool execute.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultAllow.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an allow permission result — PermissionResultAllow","text":"","code":"PermissionResultAllow(message = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultAllow.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an allow permission result — PermissionResultAllow","text":"message Optional message display","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultAllow.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an allow permission result — PermissionResultAllow","text":"PermissionResultAllow object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultAllow.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an allow permission result — PermissionResultAllow","text":"","code":"# Allow a tool call PermissionResultAllow() #> $decision #> [1] \"allow\" #>  #> $message #> NULL #>  #> attr(,\"class\") #> [1] \"PermissionResultAllow\" \"PermissionResult\"      \"list\"                   # Allow with a message PermissionResultAllow(message = \"Tool approved by custom callback\") #> $decision #> [1] \"allow\" #>  #> $message #> [1] \"Tool approved by custom callback\" #>  #> attr(,\"class\") #> [1] \"PermissionResultAllow\" \"PermissionResult\"      \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultDeny.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a deny permission result — PermissionResultDeny","title":"Create a deny permission result — PermissionResultDeny","text":"Returns permission result denies tool executing.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultDeny.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a deny permission result — PermissionResultDeny","text":"","code":"PermissionResultDeny(reason, interrupt = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultDeny.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a deny permission result — PermissionResultDeny","text":"reason Reason denial (shown LLM) interrupt TRUE, stop entire conversation (default FALSE)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultDeny.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a deny permission result — PermissionResultDeny","text":"PermissionResultDeny object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/PermissionResultDeny.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a deny permission result — PermissionResultDeny","text":"","code":"# Deny a tool call PermissionResultDeny(reason = \"File write not allowed\") #> $decision #> [1] \"deny\" #>  #> $reason #> [1] \"File write not allowed\" #>  #> $interrupt #> [1] FALSE #>  #> attr(,\"class\") #> [1] \"PermissionResultDeny\" \"PermissionResult\"     \"list\"                  # Deny and interrupt the conversation PermissionResultDeny(reason = \"Critical security violation\", interrupt = TRUE) #> $decision #> [1] \"deny\" #>  #> $reason #> [1] \"Critical security violation\" #>  #> $interrupt #> [1] TRUE #>  #> attr(,\"class\") #> [1] \"PermissionResultDeny\" \"PermissionResult\"     \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":null,"dir":"Reference","previous_headings":"","what":"Permissions R6 Class — Permissions","title":"Permissions R6 Class — Permissions","text":"Controls agent allowed . Permissions can configured fine-grained controls different tool types, custom callback complex logic. Tool gating fields: tool_allowlist: Optional list tools allowed. set, tools list denied. tool_denylist: Optional list tools always denied. permission_prompt_tool_name: Optional tool name mention deny messages gated tools (e.g., \"AskUserQuestion\"). Security Note: Permission fields immutable construction. prevents adversarial code modifying permissions runtime. fields use active bindings reject modification attempts.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"active-bindings","dir":"Reference","previous_headings":"","what":"Active bindings","title":"Permissions R6 Class — Permissions","text":"mode Permission mode (see PermissionMode). Read-construction. file_read Allow file reading. Read-construction. file_write Allow file writing. Can TRUE, FALSE, directory path. Read-construction. bash Allow bash command execution. Read-construction. r_code Allow R code execution. Read-construction. web Allow web requests. Read-construction. install_packages Allow package installation. Read-construction. max_turns Maximum number turns stopping. Read-construction. max_cost_usd Maximum cost USD stopping. Read-construction. can_use_tool Custom permission callback. Read-construction. tool_allowlist Optional character vector allowed tool names. Read-construction. tool_denylist Optional character vector denied tool names. Read-construction. permission_prompt_tool_name Optional tool name used gating deny messages. Read-construction.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Permissions R6 Class — Permissions","text":"Permissions$new() Permissions$check() Permissions$print() Permissions$clone()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Permissions R6 Class — Permissions","text":"Create new Permissions object.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Permissions R6 Class — Permissions","text":"","code":"Permissions$new(   mode = \"default\",   file_read = TRUE,   file_write = NULL,   bash = FALSE,   r_code = TRUE,   web = FALSE,   install_packages = FALSE,   max_turns = 25,   max_cost_usd = NULL,   can_use_tool = NULL,   tool_allowlist = NULL,   tool_denylist = NULL,   permission_prompt_tool_name = NULL )"},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Permissions R6 Class — Permissions","text":"mode Permission mode file_read Allow file reading file_write Allow file writing (TRUE, FALSE, directory path) bash Allow bash commands r_code Allow R code execution web Allow web requests install_packages Allow package installation max_turns Maximum turns max_cost_usd Maximum cost can_use_tool Custom callback function tool_allowlist Optional character vector allowed tool names tool_denylist Optional character vector denied tool names permission_prompt_tool_name Optional tool name suggest permission deny messages gated tools","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"Permissions R6 Class — Permissions","text":"new Permissions object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"method-check-","dir":"Reference","previous_headings":"","what":"Method check()","title":"Permissions R6 Class — Permissions","text":"Check tool allowed execute.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Permissions R6 Class — Permissions","text":"","code":"Permissions$check(tool_name, tool_input, context = list())"},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Permissions R6 Class — Permissions","text":"tool_name Name tool tool_input Arguments passed tool context Additional context (e.g., working_dir, tool_annotations)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"Permissions R6 Class — Permissions","text":"PermissionResultAllow PermissionResultDeny","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"Permissions R6 Class — Permissions","text":"Print permissions configuration.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Permissions R6 Class — Permissions","text":"","code":"Permissions$print()"},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"Permissions R6 Class — Permissions","text":"objects class cloneable method.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Permissions R6 Class — Permissions","text":"","code":"Permissions$clone(deep = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/Permissions.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Permissions R6 Class — Permissions","text":"deep Whether make deep clone.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":null,"dir":"Reference","previous_headings":"","what":"Skill R6 Class — Skill","title":"Skill R6 Class — Skill","text":"Represents skill can loaded agent. Skills bundle together system prompt extension, tools, metadata requirements.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"Skill R6 Class — Skill","text":"name Skill name version Skill version description Brief description skill prompt System prompt extension (SKILL.md) tools List tools provided skill requires Requirements (packages, providers) path Path skill directory","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Skill R6 Class — Skill","text":"Skill$new() Skill$check_requirements() Skill$print() Skill$clone()","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Skill R6 Class — Skill","text":"Create new Skill object.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Skill R6 Class — Skill","text":"","code":"Skill$new(   name,   version = \"0.0.0\",   description = NULL,   prompt = NULL,   tools = list(),   requires = list(),   path = NULL )"},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Skill R6 Class — Skill","text":"name Skill name version Skill version (default: \"0.0.0\") description Brief description prompt System prompt extension tools List tools requires List requirements path Path skill directory","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"Skill R6 Class — Skill","text":"new Skill object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"method-check-requirements-","dir":"Reference","previous_headings":"","what":"Method check_requirements()","title":"Skill R6 Class — Skill","text":"Check skill requirements met.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Skill R6 Class — Skill","text":"","code":"Skill$check_requirements(current_provider = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Skill R6 Class — Skill","text":"current_provider Optional current provider name validation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"Skill R6 Class — Skill","text":"List ok (logical), missing (character vector), provider_mismatch (logical)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"Skill R6 Class — Skill","text":"Print skill.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Skill R6 Class — Skill","text":"","code":"Skill$print()"},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"Skill R6 Class — Skill","text":"objects class cloneable method.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Skill R6 Class — Skill","text":"","code":"Skill$clone(deep = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/Skill.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Skill R6 Class — Skill","text":"deep Whether make deep clone.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/ToolPresets.html","id":null,"dir":"Reference","previous_headings":"","what":"Available tool preset names — ToolPresets","title":"Available tool preset names — ToolPresets","text":"Character vector valid preset names tools_preset().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/ToolPresets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Available tool preset names — ToolPresets","text":"","code":"ToolPresets"},{"path":"https://jameshwade.github.io/deputy/reference/ToolPresets.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Available tool preset names — ToolPresets","text":"object class character length 5.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_budget_exceeded.html","id":null,"dir":"Reference","previous_headings":"","what":"Abort with a budget exceeded error — abort_budget_exceeded","title":"Abort with a budget exceeded error — abort_budget_exceeded","text":"Signals agent exceeded cost budget.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_budget_exceeded.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Abort with a budget exceeded error — abort_budget_exceeded","text":"","code":"abort_budget_exceeded(   message,   current_cost = NULL,   max_cost = NULL,   ...,   .envir = parent.frame() )"},{"path":"https://jameshwade.github.io/deputy/reference/abort_budget_exceeded.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Abort with a budget exceeded error — abort_budget_exceeded","text":"message error message (supports cli formatting) current_cost current accumulated cost max_cost maximum allowed cost ... Additional context fields .envir Environment cli interpolation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_budget_exceeded.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Abort with a budget exceeded error — abort_budget_exceeded","text":"","code":"if (FALSE) { # \\dontrun{ abort_budget_exceeded(   \"Cost limit exceeded: ${current_cost} > ${max_cost}\",   current_cost = 0.55,   max_cost = 0.50 ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/abort_deputy.html","id":null,"dir":"Reference","previous_headings":"","what":"Abort with a structured deputy error — abort_deputy","title":"Abort with a structured deputy error — abort_deputy","text":"Creates signals structured deputy error using cli formatting. deputy errors include message, optional context, inherit deputy_error condition class.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_deputy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Abort with a structured deputy error — abort_deputy","text":"","code":"abort_deputy(message, class = NULL, ..., .envir = parent.frame())"},{"path":"https://jameshwade.github.io/deputy/reference/abort_deputy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Abort with a structured deputy error — abort_deputy","text":"message error message (supports cli formatting) class Additional classes add (prefixed \"deputy_\") ... Additional fields include error condition .envir Environment cli interpolation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_deputy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Abort with a structured deputy error — abort_deputy","text":"return; signals error condition","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_deputy.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Abort with a structured deputy error — abort_deputy","text":"","code":"if (FALSE) { # \\dontrun{ # Signal an error abort_deputy(\"Something went wrong\", class = \"custom\")  # Catch deputy errors tryCatch(   abort_deputy(\"test\"),   deputy_error = function(e) message(\"Caught: \", conditionMessage(e)) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/abort_hook.html","id":null,"dir":"Reference","previous_headings":"","what":"Abort with a hook error — abort_hook","title":"Abort with a hook error — abort_hook","text":"Signals hook callback failed execution.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_hook.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Abort with a hook error — abort_hook","text":"","code":"abort_hook(   message,   hook_event = NULL,   parent = NULL,   ...,   .envir = parent.frame() )"},{"path":"https://jameshwade.github.io/deputy/reference/abort_hook.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Abort with a hook error — abort_hook","text":"message error message (supports cli formatting) hook_event hook event type (e.g., \"PreToolUse\", \"PostToolUse\") parent parent error hook callback (optional) ... Additional context fields .envir Environment cli interpolation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_hook.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Abort with a hook error — abort_hook","text":"","code":"if (FALSE) { # \\dontrun{ abort_hook(   c(\"Hook {.val {hook_event}} failed\", \"x\" = \"Callback error\"),   hook_event = \"PreToolUse\" ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/abort_permission_denied.html","id":null,"dir":"Reference","previous_headings":"","what":"Abort with a permission denied error — abort_permission_denied","title":"Abort with a permission denied error — abort_permission_denied","text":"Signals operation denied permission system.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_permission_denied.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Abort with a permission denied error — abort_permission_denied","text":"","code":"abort_permission_denied(   message,   tool_name = NULL,   permission_mode = NULL,   reason = NULL,   ...,   .envir = parent.frame() )"},{"path":"https://jameshwade.github.io/deputy/reference/abort_permission_denied.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Abort with a permission denied error — abort_permission_denied","text":"message error message (supports cli formatting) tool_name Name tool denied (optional) permission_mode current permission mode (optional) reason Reason denial (optional) ... Additional context fields .envir Environment cli interpolation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_permission_denied.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Abort with a permission denied error — abort_permission_denied","text":"","code":"if (FALSE) { # \\dontrun{ abort_permission_denied(   \"Write operations not allowed in {.val {mode}} mode\",   tool_name = \"write_file\",   permission_mode = \"readonly\" ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/abort_provider.html","id":null,"dir":"Reference","previous_headings":"","what":"Abort with a provider error — abort_provider","title":"Abort with a provider error — abort_provider","text":"Signals LLM provider encountered error.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_provider.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Abort with a provider error — abort_provider","text":"","code":"abort_provider(   message,   provider_name = NULL,   model = NULL,   parent = NULL,   ...,   .envir = parent.frame() )"},{"path":"https://jameshwade.github.io/deputy/reference/abort_provider.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Abort with a provider error — abort_provider","text":"message error message (supports cli formatting) provider_name Name provider (e.g., \"openai\", \"anthropic\") model model used (optional) parent parent error provider (optional) ... Additional context fields .envir Environment cli interpolation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_provider.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Abort with a provider error — abort_provider","text":"","code":"if (FALSE) { # \\dontrun{ abort_provider(   c(\"API error from {.val {provider_name}}\", \"x\" = \"Rate limit exceeded\"),   provider_name = \"openai\",   model = \"gpt-4o\" ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/abort_session_load.html","id":null,"dir":"Reference","previous_headings":"","what":"Abort with a session load error — abort_session_load","title":"Abort with a session load error — abort_session_load","text":"Signals loading session file failed.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_session_load.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Abort with a session load error — abort_session_load","text":"","code":"abort_session_load(   message,   path = NULL,   parent = NULL,   ...,   .envir = parent.frame() )"},{"path":"https://jameshwade.github.io/deputy/reference/abort_session_load.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Abort with a session load error — abort_session_load","text":"message error message (supports cli formatting) path Path session file parent parent error caused failure (optional) ... Additional context fields .envir Environment cli interpolation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_session_load.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Abort with a session load error — abort_session_load","text":"","code":"if (FALSE) { # \\dontrun{ abort_session_load(   c(\"Failed to load session\", \"x\" = \"File corrupted\"),   path = \"agent_session.rds\" ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/abort_session_save.html","id":null,"dir":"Reference","previous_headings":"","what":"Abort with a session save error — abort_session_save","title":"Abort with a session save error — abort_session_save","text":"Signals saving session file failed.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_session_save.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Abort with a session save error — abort_session_save","text":"","code":"abort_session_save(   message,   path = NULL,   parent = NULL,   ...,   .envir = parent.frame() )"},{"path":"https://jameshwade.github.io/deputy/reference/abort_session_save.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Abort with a session save error — abort_session_save","text":"message error message (supports cli formatting) path Path session saved parent parent error caused failure (optional) ... Additional context fields .envir Environment cli interpolation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_session_save.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Abort with a session save error — abort_session_save","text":"","code":"if (FALSE) { # \\dontrun{ abort_session_save(   \"Cannot write to {.path {path}}\",   path = \"/readonly/path/session.rds\" ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/abort_tool_execution.html","id":null,"dir":"Reference","previous_headings":"","what":"Abort with a tool execution error — abort_tool_execution","title":"Abort with a tool execution error — abort_tool_execution","text":"Signals tool failed execution.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_tool_execution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Abort with a tool execution error — abort_tool_execution","text":"","code":"abort_tool_execution(   message,   tool_name,   tool_input = NULL,   parent = NULL,   ...,   .envir = parent.frame() )"},{"path":"https://jameshwade.github.io/deputy/reference/abort_tool_execution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Abort with a tool execution error — abort_tool_execution","text":"message error message (supports cli formatting) tool_name Name tool failed tool_input input passed tool (optional) parent parent error caused failure (optional) ... Additional context fields .envir Environment cli interpolation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_tool_execution.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Abort with a tool execution error — abort_tool_execution","text":"","code":"if (FALSE) { # \\dontrun{ abort_tool_execution(   c(\"Tool {.fn {tool_name}} failed\", \"x\" = \"File not found\"),   tool_name = \"read_file\",   tool_input = list(path = \"/nonexistent/file.txt\") ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/abort_turn_limit.html","id":null,"dir":"Reference","previous_headings":"","what":"Abort with a turn limit error — abort_turn_limit","title":"Abort with a turn limit error — abort_turn_limit","text":"Signals agent exceeded maximum turn limit.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_turn_limit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Abort with a turn limit error — abort_turn_limit","text":"","code":"abort_turn_limit(   message,   current_turns = NULL,   max_turns = NULL,   ...,   .envir = parent.frame() )"},{"path":"https://jameshwade.github.io/deputy/reference/abort_turn_limit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Abort with a turn limit error — abort_turn_limit","text":"message error message (supports cli formatting) current_turns number turns executed max_turns maximum allowed turns ... Additional context fields .envir Environment cli interpolation","code":""},{"path":"https://jameshwade.github.io/deputy/reference/abort_turn_limit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Abort with a turn limit error — abort_turn_limit","text":"","code":"if (FALSE) { # \\dontrun{ abort_turn_limit(   \"Maximum turns exceeded: {current_turns}/{max_turns}\",   current_turns = 25,   max_turns = 25 ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/agent_definition.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an Agent Definition — agent_definition","title":"Create an Agent Definition — agent_definition","text":"AgentDefinition describes specialized agent can used lead agent delegate tasks. bundles together system prompt, tools, metadata agent can .","code":""},{"path":"https://jameshwade.github.io/deputy/reference/agent_definition.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an Agent Definition — agent_definition","text":"","code":"agent_definition(   name,   description,   prompt,   tools = list(),   model = \"inherit\",   skills = list() )"},{"path":"https://jameshwade.github.io/deputy/reference/agent_definition.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an Agent Definition — agent_definition","text":"name Unique name agent type description Brief description agent (shown lead agent) prompt System prompt agent tools Optional list tools agent model Model use (default: \"inherit\" uses parent's model) skills Optional list skills load","code":""},{"path":"https://jameshwade.github.io/deputy/reference/agent_definition.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an Agent Definition — agent_definition","text":"AgentDefinition object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/agent_definition.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an Agent Definition — agent_definition","text":"","code":"if (FALSE) { # \\dontrun{ # Define a code review agent code_reviewer <- agent_definition(   name = \"code_reviewer\",   description = \"Reviews code for bugs, style issues, and best practices\",   prompt = \"You are an expert code reviewer...\",   tools = list(tool_read_file, tool_list_files) )  # Use with a lead agent lead <- LeadAgent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   sub_agents = list(code_reviewer) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/agent_with_delegation.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a simple delegation agent — agent_with_delegation","title":"Create a simple delegation agent — agent_with_delegation","text":"Convenience function create LeadAgent common sub-agents code-related tasks.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/agent_with_delegation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a simple delegation agent — agent_with_delegation","text":"","code":"agent_with_delegation(chat, permissions = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/agent_with_delegation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a simple delegation agent — agent_with_delegation","text":"chat ellmer Chat object permissions Optional permissions","code":""},{"path":"https://jameshwade.github.io/deputy/reference/agent_with_delegation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a simple delegation agent — agent_with_delegation","text":"LeadAgent object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/agent_with_delegation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a simple delegation agent — agent_with_delegation","text":"","code":"if (FALSE) { # \\dontrun{ agent <- agent_with_delegation(   chat = ellmer::chat(\"openai/gpt-4o\") )  result <- agent$run_sync(\"Review the code in main.R and suggest improvements\") } # }"},{"path":"https://jameshwade.github.io/deputy/reference/ask_user_impl.html","id":null,"dir":"Reference","previous_headings":"","what":"Ask user questions (internal implementation) — ask_user_impl","title":"Ask user questions (internal implementation) — ask_user_impl","text":"Ask user questions (internal implementation)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/ask_user_impl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ask user questions (internal implementation) — ask_user_impl","text":"","code":"ask_user_impl(questions)"},{"path":"https://jameshwade.github.io/deputy/reference/ask_user_impl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ask user questions (internal implementation) — ask_user_impl","text":"questions List question objects following SDK format","code":""},{"path":"https://jameshwade.github.io/deputy/reference/ask_user_impl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ask user questions (internal implementation) — ask_user_impl","text":"Named list mapping question text selected answers","code":""},{"path":"https://jameshwade.github.io/deputy/reference/claude_settings_apply.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Claude-style settings to an Agent — claude_settings_apply","title":"Apply Claude-style settings to an Agent — claude_settings_apply","text":"Applies settings loaded claude_settings_load() Agent, including memory injection, skill loading, slash command registration.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/claude_settings_apply.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Claude-style settings to an Agent — claude_settings_apply","text":"","code":"claude_settings_apply(   agent,   settings,   apply_memory = TRUE,   load_skills = TRUE,   load_commands = TRUE )"},{"path":"https://jameshwade.github.io/deputy/reference/claude_settings_apply.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Claude-style settings to an Agent — claude_settings_apply","text":"agent Agent object. settings Settings list returned claude_settings_load(). apply_memory Logical. TRUE (default), append memory system prompt. load_skills Logical. TRUE (default), load skills agent. load_commands Logical. TRUE (default), register slash commands.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/claude_settings_apply.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Claude-style settings to an Agent — claude_settings_apply","text":"Invisibly returns agent.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/claude_settings_load.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Claude-style settings from settingSources — claude_settings_load","title":"Load Claude-style settings from settingSources — claude_settings_load","text":"Loads Claude-style settings list setting_sources, mirroring Claude Agent SDK behavior. Supports project user sources, returns memory, skills, slash commands discovered .claude directories. Supported sources: \"project\": loads project .claude settings, skills, commands, memory \"user\": loads ~/.claude settings, skills, commands, memory explicit file paths .json settings files","code":""},{"path":"https://jameshwade.github.io/deputy/reference/claude_settings_load.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Claude-style settings from settingSources — claude_settings_load","text":"","code":"claude_settings_load(setting_sources, working_dir = getwd())"},{"path":"https://jameshwade.github.io/deputy/reference/claude_settings_load.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Claude-style settings from settingSources — claude_settings_load","text":"setting_sources Character vector sources, e.g. c(\"project\", \"user\"). working_dir Working directory used project sources.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/claude_settings_load.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Claude-style settings from settingSources — claude_settings_load","text":"list settings, memory, skills, commands, metadata.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/deputy-errors.html","id":null,"dir":"Reference","previous_headings":"","what":"Deputy Error Classes — deputy-errors","title":"Deputy Error Classes — deputy-errors","text":"Structured error types programmatic error handling deputy. deputy errors inherit deputy_error include contextual information debugging. Errors use cli formatting readable output.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/deputy-errors.html","id":"error-hierarchy","dir":"Reference","previous_headings":"","what":"Error Hierarchy","title":"Deputy Error Classes — deputy-errors","text":"deputy_error - Base class deputy errors deputy_permission - Permission-related failures deputy_permission_denied - Tool/action allowed permissions deputy_tool - Tool execution failures deputy_tool_execution - Tool failed execution deputy_budget - Resource limit violations deputy_budget_exceeded - Cost limit exceeded deputy_turn_limit - Max turns exceeded deputy_provider - LLM provider failures deputy_session - Session management failures deputy_session_load - Failed load session deputy_session_save - Failed save session deputy_hook - Hook execution failures","code":""},{"path":"https://jameshwade.github.io/deputy/reference/deputy-errors.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deputy Error Classes — deputy-errors","text":"Errors can caught using tryCatch() class-based matching:","code":"tryCatch(   agent$run_sync(\"task\"),   deputy_budget_exceeded = function(e) {     message(\"Budget exceeded: \", conditionMessage(e))     message(\"Current cost: $\", e$current_cost)   },   deputy_error = function(e) {     message(\"Deputy error: \", conditionMessage(e))   } )"},{"path":"https://jameshwade.github.io/deputy/reference/deputy-package.html","id":null,"dir":"Reference","previous_headings":"","what":"deputy: Agentic AI Workflows for R — deputy-package","title":"deputy: Agentic AI Workflows for R — deputy-package","text":"provider-agnostic framework building agentic AI workflows R. Built ellmer, enables multi-step reasoning tool use, permissions, hooks, human---loop capabilities. Works LLM provider ellmer supports including OpenAI, Anthropic, Google, local models via Ollama. provider-agnostic framework building agentic AI workflows R. Built ellmer, enables multi-step reasoning tool use, permissions, hooks, human---loop capabilities.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/deputy-package.html","id":"main-functions","dir":"Reference","previous_headings":"","what":"Main Functions","title":"deputy: Agentic AI Workflows for R — deputy-package","text":"Agent - main class creating agents tools_file() - File operation tools tools_code() - Code execution tools permissions_standard() - Standard permission policy permissions_readonly() - Read-permission policy","code":""},{"path":"https://jameshwade.github.io/deputy/reference/deputy-package.html","id":"getting-started","dir":"Reference","previous_headings":"","what":"Getting Started","title":"deputy: Agentic AI Workflows for R — deputy-package","text":"","code":"library(deputy)  # Create an agent with file tools agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = tools_file() )  # Run a task with streaming output for (event in agent$run(\"List files in current directory\")) {   if (event$type == \"text\") cat(event$text) }"},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/deputy-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"deputy: Agentic AI Workflows for R — deputy-package","text":"Maintainer: James Wade github@jameshwade.com (ORCID)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/get_ask_user_callback.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the current user input callback — get_ask_user_callback","title":"Get the current user input callback — get_ask_user_callback","text":"Get current user input callback","code":""},{"path":"https://jameshwade.github.io/deputy/reference/get_ask_user_callback.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the current user input callback — get_ask_user_callback","text":"","code":"get_ask_user_callback()"},{"path":"https://jameshwade.github.io/deputy/reference/get_ask_user_callback.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the current user input callback — get_ask_user_callback","text":"current callback function, NULL none set.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_block_dangerous_bash.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a hook that blocks dangerous bash commands — hook_block_dangerous_bash","title":"Create a hook that blocks dangerous bash commands — hook_block_dangerous_bash","text":"Convenience function create PreToolUse hook blocks potentially dangerous bash commands. Default patterns include: File system destruction: rm -rf, mkfs, dd =, writes /dev/ Privilege escalation: sudo, su -, chmod 777, chown, setuid Code execution: eval, exec, source (variables), backticks Process manipulation: kill -9, killall, pkill, fork bombs System modification: crontab, systemctl, /etc/passwd, /etc/shadow Network exfiltration: curl -X POST, wget --post, nc -e, netcat, reverse shells Obfuscation detection: Variable expansion commands, base64 piping, hex/octal escapes, quote splitting, backslash escapes Security Note: defense--depth catch possible obfuscation techniques. high-security environments, consider: Using sandboxed execution (Docker, firejail) Disabling bash entirely via Permissions Using command whitelist instead blacklist","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_block_dangerous_bash.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a hook that blocks dangerous bash commands — hook_block_dangerous_bash","text":"","code":"hook_block_dangerous_bash(patterns = NULL, additional_patterns = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/hook_block_dangerous_bash.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a hook that blocks dangerous bash commands — hook_block_dangerous_bash","text":"patterns Character vector regex patterns block. Default includes comprehensive dangerous patterns. additional_patterns Optional character vector additional patterns block alongside defaults.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_block_dangerous_bash.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a hook that blocks dangerous bash commands — hook_block_dangerous_bash","text":"HookMatcher object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_block_dangerous_bash.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a hook that blocks dangerous bash commands — hook_block_dangerous_bash","text":"","code":"if (FALSE) { # \\dontrun{ # Use default patterns agent$add_hook(hook_block_dangerous_bash())  # Add custom patterns agent$add_hook(hook_block_dangerous_bash(   additional_patterns = c(\"my_custom_pattern\", \"another_pattern\") )) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/hook_limit_file_writes.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a hook that limits file writes to a directory — hook_limit_file_writes","title":"Create a hook that limits file writes to a directory — hook_limit_file_writes","text":"Convenience function create PreToolUse hook allows file writes within specified directory.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_limit_file_writes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a hook that limits file writes to a directory — hook_limit_file_writes","text":"","code":"hook_limit_file_writes(allowed_dir)"},{"path":"https://jameshwade.github.io/deputy/reference/hook_limit_file_writes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a hook that limits file writes to a directory — hook_limit_file_writes","text":"allowed_dir Directory writes allowed","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_limit_file_writes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a hook that limits file writes to a directory — hook_limit_file_writes","text":"HookMatcher object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_limit_file_writes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a hook that limits file writes to a directory — hook_limit_file_writes","text":"","code":"if (FALSE) { # \\dontrun{ agent$add_hook(hook_limit_file_writes(\"./output\")) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/hook_log_tools.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a hook that logs all tool calls — hook_log_tools","title":"Create a hook that logs all tool calls — hook_log_tools","text":"Convenience function create PostToolUse hook logs tool calls using cli package.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_log_tools.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a hook that logs all tool calls — hook_log_tools","text":"","code":"hook_log_tools(verbose = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/hook_log_tools.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a hook that logs all tool calls — hook_log_tools","text":"verbose TRUE, include tool result log","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_log_tools.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a hook that logs all tool calls — hook_log_tools","text":"HookMatcher object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/hook_log_tools.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a hook that logs all tool calls — hook_log_tools","text":"","code":"if (FALSE) { # \\dontrun{ agent$add_hook(hook_log_tools()) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/is_deputy_error.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if an object is a deputy error — is_deputy_error","title":"Check if an object is a deputy error — is_deputy_error","text":"Tests whether object deputy error condition.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/is_deputy_error.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if an object is a deputy error — is_deputy_error","text":"","code":"is_deputy_error(x, class = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/is_deputy_error.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if an object is a deputy error — is_deputy_error","text":"x Object test class Optional specific error class check (without \"deputy_\" prefix)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/is_deputy_error.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if an object is a deputy error — is_deputy_error","text":"Logical indicating x deputy error (specified class)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/is_deputy_error.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if an object is a deputy error — is_deputy_error","text":"","code":"if (FALSE) { # \\dontrun{ tryCatch(   abort_deputy(\"test\"),   error = function(e) {     is_deputy_error(e)     # TRUE   } ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/list_presets.html","id":null,"dir":"Reference","previous_headings":"","what":"List available tool presets — list_presets","title":"List available tool presets — list_presets","text":"Returns information available tool presets, including names, descriptions, tools contain.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/list_presets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List available tool presets — list_presets","text":"","code":"list_presets()"},{"path":"https://jameshwade.github.io/deputy/reference/list_presets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List available tool presets — list_presets","text":"data frame preset information","code":""},{"path":"https://jameshwade.github.io/deputy/reference/list_presets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List available tool presets — list_presets","text":"","code":"list_presets() #>       name                          description #> 1  minimal Read-only tools for safe exploration #> 2 standard   Balanced toolset for R development #> 3      dev   Full development with shell access #> 4     data          Data analysis focused tools #> 5     full                  All available tools #>                                                                                      tools #> 1                                                                    read_file, list_files #> 2                                            read_file, write_file, list_files, run_r_code #> 3                                  read_file, write_file, list_files, run_r_code, run_bash #> 4                                              read_file, list_files, read_csv, run_r_code #> 5 read_file, write_file, list_files, run_r_code, run_bash, read_csv, web_fetch, web_search"},{"path":"https://jameshwade.github.io/deputy/reference/load_skill_tools.html","id":null,"dir":"Reference","previous_headings":"","what":"Load tools from skill directory — load_skill_tools","title":"Load tools from skill directory — load_skill_tools","text":"Load tools skill directory","code":""},{"path":"https://jameshwade.github.io/deputy/reference/load_skill_tools.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load tools from skill directory — load_skill_tools","text":"","code":"load_skill_tools(skill_path, tool_specs)"},{"path":"https://jameshwade.github.io/deputy/reference/load_skill_tools.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load tools from skill directory — load_skill_tools","text":"skill_path Path skill directory tool_specs List tool specifications SKILL.yaml","code":""},{"path":"https://jameshwade.github.io/deputy/reference/load_skill_tools.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load tools from skill directory — load_skill_tools","text":"List tool definitions","code":""},{"path":"https://jameshwade.github.io/deputy/reference/mcp_available.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if MCP support is available — mcp_available","title":"Check if MCP support is available — mcp_available","text":"Returns TRUE mcptools package installed available.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/mcp_available.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if MCP support is available — mcp_available","text":"","code":"mcp_available()"},{"path":"https://jameshwade.github.io/deputy/reference/mcp_available.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if MCP support is available — mcp_available","text":"Logical indicating MCP support available","code":""},{"path":"https://jameshwade.github.io/deputy/reference/mcp_available.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if MCP support is available — mcp_available","text":"","code":"if (mcp_available()) {   message(\"MCP support is available\") } #> MCP support is available"},{"path":"https://jameshwade.github.io/deputy/reference/mcp_servers.html","id":null,"dir":"Reference","previous_headings":"","what":"List available MCP servers — mcp_servers","title":"List available MCP servers — mcp_servers","text":"Lists MCP servers configured mcptools configuration file.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/mcp_servers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List available MCP servers — mcp_servers","text":"","code":"mcp_servers(config = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/mcp_servers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List available MCP servers — mcp_servers","text":"config Path MCP configuration file. NULL (default), uses ~/.config/mcptools/config.json.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/mcp_servers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List available MCP servers — mcp_servers","text":"character vector server names. Returns character(0) config exists servers. Returns NULL error (mcptools installed, config file missing, parse error).","code":""},{"path":"https://jameshwade.github.io/deputy/reference/mcp_servers.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List available MCP servers — mcp_servers","text":"","code":"if (FALSE) { # \\dontrun{ # List configured servers mcp_servers() } # }"},{"path":"https://jameshwade.github.io/deputy/reference/normalize_provider_name.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize provider name for comparison — normalize_provider_name","title":"Normalize provider name for comparison — normalize_provider_name","text":"Normalize provider name comparison","code":""},{"path":"https://jameshwade.github.io/deputy/reference/normalize_provider_name.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize provider name for comparison — normalize_provider_name","text":"","code":"normalize_provider_name(provider)"},{"path":"https://jameshwade.github.io/deputy/reference/normalize_provider_name.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize provider name for comparison — normalize_provider_name","text":"provider Provider name (e.g., \"openai\", \"OpenAI\", \"anthropic\")","code":""},{"path":"https://jameshwade.github.io/deputy/reference/normalize_provider_name.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize provider name for comparison — normalize_provider_name","text":"Lowercase normalized provider name, NA_character_ invalid","code":""},{"path":"https://jameshwade.github.io/deputy/reference/parse_markdown_frontmatter.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse Markdown frontmatter — parse_markdown_frontmatter","title":"Parse Markdown frontmatter — parse_markdown_frontmatter","text":"Parse Markdown frontmatter","code":""},{"path":"https://jameshwade.github.io/deputy/reference/parse_markdown_frontmatter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse Markdown frontmatter — parse_markdown_frontmatter","text":"","code":"parse_markdown_frontmatter(path)"},{"path":"https://jameshwade.github.io/deputy/reference/parse_markdown_frontmatter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse Markdown frontmatter — parse_markdown_frontmatter","text":"path Path Markdown file","code":""},{"path":"https://jameshwade.github.io/deputy/reference/parse_markdown_frontmatter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse Markdown frontmatter — parse_markdown_frontmatter","text":"List meta (list) body (character)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/parse_user_response.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse user response as option number(s) or free text — parse_user_response","title":"Parse user response as option number(s) or free text — parse_user_response","text":"Parse user response option number(s) free text","code":""},{"path":"https://jameshwade.github.io/deputy/reference/parse_user_response.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse user response as option number(s) or free text — parse_user_response","text":"","code":"parse_user_response(response, options, multi_select = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/parse_user_response.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse user response as option number(s) or free text — parse_user_response","text":"response User's input string options List option objects label description multi_select Whether multiple selections allowed","code":""},{"path":"https://jameshwade.github.io/deputy/reference/parse_user_response.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse user response as option number(s) or free text — parse_user_response","text":"Selected label(s) free text response","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_full.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a full access permission policy — permissions_full","title":"Create a full access permission policy — permissions_full","text":"Creates permission policy allows operations. Use caution! bypasses permission checks.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_full.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a full access permission policy — permissions_full","text":"","code":"permissions_full(max_turns = 50, max_cost_usd = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/permissions_full.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a full access permission policy — permissions_full","text":"max_turns Maximum number turns (default 50) max_cost_usd Maximum cost USD (default NULL = unlimited)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_full.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a full access permission policy — permissions_full","text":"Permissions object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_full.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a full access permission policy — permissions_full","text":"","code":"perms <- permissions_full()"},{"path":"https://jameshwade.github.io/deputy/reference/permissions_readonly.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a read-only permission policy — permissions_readonly","title":"Create a read-only permission policy — permissions_readonly","text":"Creates permission policy allows reading files. write operations, code execution, web access denied.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_readonly.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a read-only permission policy — permissions_readonly","text":"","code":"permissions_readonly(max_turns = 25)"},{"path":"https://jameshwade.github.io/deputy/reference/permissions_readonly.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a read-only permission policy — permissions_readonly","text":"max_turns Maximum number turns (default 25)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_readonly.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a read-only permission policy — permissions_readonly","text":"Permissions object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_readonly.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a read-only permission policy — permissions_readonly","text":"","code":"perms <- permissions_readonly() perms$check(\"read_file\", list(path = \"test.txt\")) #> $decision #> [1] \"allow\" #>  #> $message #> NULL #>  #> attr(,\"class\") #> [1] \"PermissionResultAllow\" \"PermissionResult\"      \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_standard.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a standard permission policy — permissions_standard","title":"Create a standard permission policy — permissions_standard","text":"Creates permission policy suitable use cases. Allows file read/write within working directory R code execution. Denies bash commands, web access, package installation.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_standard.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a standard permission policy — permissions_standard","text":"","code":"permissions_standard(   working_dir = getwd(),   max_turns = 25,   max_cost_usd = NULL )"},{"path":"https://jameshwade.github.io/deputy/reference/permissions_standard.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a standard permission policy — permissions_standard","text":"working_dir Directory file operations (default: current directory) max_turns Maximum number turns (default 25) max_cost_usd Maximum cost USD (default NULL = unlimited)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_standard.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a standard permission policy — permissions_standard","text":"Permissions object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/permissions_standard.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a standard permission policy — permissions_standard","text":"","code":"perms <- permissions_standard() perms$check(\"write_file\", list(path = \"output.txt\")) #> $decision #> [1] \"deny\" #>  #> $reason #> [1] \"File writing only allowed in: /home/runner/work/deputy/deputy/docs/reference\" #>  #> $interrupt #> [1] FALSE #>  #> attr(,\"class\") #> [1] \"PermissionResultDeny\" \"PermissionResult\"     \"list\""},{"path":"https://jameshwade.github.io/deputy/reference/set_ask_user_callback.html","id":null,"dir":"Reference","previous_headings":"","what":"Set callback for non-interactive user input — set_ask_user_callback","title":"Set callback for non-interactive user input — set_ask_user_callback","text":"non-interactive sessions (scripts, Shiny apps, etc.), set callback function called agent needs user input via AskUserQuestion.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/set_ask_user_callback.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set callback for non-interactive user input — set_ask_user_callback","text":"","code":"set_ask_user_callback(callback)"},{"path":"https://jameshwade.github.io/deputy/reference/set_ask_user_callback.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set callback for non-interactive user input — set_ask_user_callback","text":"callback function takes questions (list matching AskUserQuestion format). question question, header, options (list label description), multiSelect. return named list mapping question text selected label(s). multi-select, join labels \", \". Set NULL clear callback.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/set_ask_user_callback.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set callback for non-interactive user input — set_ask_user_callback","text":"Invisibly returns previous callback (NULL).","code":""},{"path":"https://jameshwade.github.io/deputy/reference/set_ask_user_callback.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set callback for non-interactive user input — set_ask_user_callback","text":"","code":"if (FALSE) { # \\dontrun{ # For a Shiny app: set_ask_user_callback(function(questions) {   # Display questions in modal and collect answers   answers <- list()   for (q in questions) {     # Show q$question with q$options     # Collect user selection     answers[[q$question]] <- selected_label   }   answers }) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/skill_create.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a skill programmatically — skill_create","title":"Create a skill programmatically — skill_create","text":"Create skill without loading disk. Useful defining skills inline R code.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/skill_create.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a skill programmatically — skill_create","text":"","code":"skill_create(   name,   description = NULL,   prompt = NULL,   tools = list(),   version = \"1.0.0\",   requires = list() )"},{"path":"https://jameshwade.github.io/deputy/reference/skill_create.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a skill programmatically — skill_create","text":"name Skill name description Brief description prompt System prompt extension tools List tools created ellmer::tool() version Version string (default: \"1.0.0\") requires List requirements (packages, providers)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/skill_create.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a skill programmatically — skill_create","text":"Skill object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/skill_create.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a skill programmatically — skill_create","text":"","code":"if (FALSE) { # \\dontrun{ # Create a simple skill my_skill <- skill_create(   name = \"calculator\",   description = \"Basic math operations\",   prompt = \"You are a helpful calculator assistant.\",   tools = list(tool_add, tool_multiply) )  agent$load_skill(my_skill) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/skill_load.html","id":null,"dir":"Reference","previous_headings":"","what":"Load a skill from a directory — skill_load","title":"Load a skill from a directory — skill_load","text":"Loads skill directory containing SKILL.yaml (metadata) /SKILL.md (system prompt extension). can also pass direct path SKILL.md file.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/skill_load.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load a skill from a directory — skill_load","text":"","code":"skill_load(path, check_requirements = TRUE)"},{"path":"https://jameshwade.github.io/deputy/reference/skill_load.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load a skill from a directory — skill_load","text":"path Path skill directory check_requirements TRUE (default), verify requirements met","code":""},{"path":"https://jameshwade.github.io/deputy/reference/skill_load.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load a skill from a directory — skill_load","text":"Skill object","code":""},{"path":"https://jameshwade.github.io/deputy/reference/skill_load.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load a skill from a directory — skill_load","text":"skill directory contain one : SKILL.yaml (required):   SKILL.md (optional, standalone file): Markdown content appended agent's system prompt skill loaded. Frontmatter supported:   tools.R (optional): R file containing tool definitions referenced SKILL.yaml.","code":"name: my_skill version: \"1.0.0\" description: What this skill does requires:   packages: [dplyr, ggplot2]   providers: [openai, anthropic] tools:   - name: my_tool     file: tools.R     function: tool_my_tool --- name: my_skill description: Optional description requires:   packages: [dplyr] ---"},{"path":"https://jameshwade.github.io/deputy/reference/skill_load.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load a skill from a directory — skill_load","text":"","code":"if (FALSE) { # \\dontrun{ # Load a skill skill <- skill_load(\"path/to/my_skill\")  # Add to agent agent$load_skill(skill) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/skills_list.html","id":null,"dir":"Reference","previous_headings":"","what":"List available skills in a directory — skills_list","title":"List available skills in a directory — skills_list","text":"Scans directory subdirectories containing SKILL.yaml files.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/skills_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List available skills in a directory — skills_list","text":"","code":"skills_list(path = \"skills\")"},{"path":"https://jameshwade.github.io/deputy/reference/skills_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List available skills in a directory — skills_list","text":"path Path search skills (default: \"skills\" working dir)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/skills_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List available skills in a directory — skills_list","text":"Data frame skill names paths","code":""},{"path":"https://jameshwade.github.io/deputy/reference/skills_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List available skills in a directory — skills_list","text":"","code":"if (FALSE) { # \\dontrun{ # List skills in default location skills_list()  # List skills in custom location skills_list(\"~/my_skills\") } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tool_ask_user.html","id":null,"dir":"Reference","previous_headings":"","what":"AskUserQuestion tool — tool_ask_user","title":"AskUserQuestion tool — tool_ask_user","text":"tool allows agent ask user clarifying questions receive responses. enables human---loop workflows agent can request clarification choices user.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_ask_user.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"AskUserQuestion tool — tool_ask_user","text":"","code":"tool_ask_user(questions)"},{"path":"https://jameshwade.github.io/deputy/reference/tool_ask_user.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"AskUserQuestion tool — tool_ask_user","text":"tool definition created ellmer::tool().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_ask_user.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"AskUserQuestion tool — tool_ask_user","text":"questions JSON string list question objects following SDK format. question : question (string), header (string, max 12 chars), options (list objects label description), optionally multiSelect (logical).","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_ask_user.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"AskUserQuestion tool — tool_ask_user","text":"tool follows Anthropic Agent SDK format: Input format: questions: Array 1-4 question objects question : question: full question text header: Short label (max 12 chars) options: Array 2-4 options, label description multiSelect: Whether multiple selections allowed Output format: Returns list two elements: questions: original questions array (echoed back) answers: Named list mapping question text selected label(s) multi-select, labels joined \", \" Users can also type free-form responses interactive R sessions, tool uses readline() get input. non-interactive use (scripts, Shiny apps), set callback set_ask_user_callback().","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tool_ask_user.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"AskUserQuestion tool — tool_ask_user","text":"","code":"if (FALSE) { # \\dontrun{ # Add to agent's tools agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = c(tools_file(), tool_ask_user) )  # The agent can ask structured questions like: # { #   \"questions\": [{ #     \"question\": \"How should I format the output?\", #     \"header\": \"Format\", #     \"options\": [ #       {\"label\": \"Summary\", \"description\": \"Brief overview\"}, #       {\"label\": \"Detailed\", \"description\": \"Full explanation\"} #     ], #     \"multiSelect\": false #   }] # } } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tool_list_files.html","id":null,"dir":"Reference","previous_headings":"","what":"List files in a directory — tool_list_files","title":"List files in a directory — tool_list_files","text":"tool lists files directories within specified path.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_list_files.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List files in a directory — tool_list_files","text":"","code":"tool_list_files(   path = \".\",   pattern = NULL,   recursive = FALSE,   full_names = FALSE )"},{"path":"https://jameshwade.github.io/deputy/reference/tool_list_files.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"List files in a directory — tool_list_files","text":"tool definition created ellmer::tool().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_list_files.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List files in a directory — tool_list_files","text":"path Directory path list (tool argument) pattern Optional regex pattern filter files (tool argument) recursive TRUE, list files recursively (tool argument) full_names TRUE, return full paths (tool argument)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_list_files.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List files in a directory — tool_list_files","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = list(tool_list_files) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_csv.html","id":null,"dir":"Reference","previous_headings":"","what":"Read a CSV file — tool_read_csv","title":"Read a CSV file — tool_read_csv","text":"tool reads CSV file returns summary structure along first rows.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_csv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read a CSV file — tool_read_csv","text":"","code":"tool_read_csv(path, n_max = 1000, show_head = 10)"},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_csv.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Read a CSV file — tool_read_csv","text":"tool definition created ellmer::tool().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_csv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read a CSV file — tool_read_csv","text":"path Path CSV file read (tool argument) n_max Maximum number rows read (tool argument) show_head Number rows show preview (tool argument)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_csv.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read a CSV file — tool_read_csv","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = list(tool_read_csv) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Read file contents — tool_read_file","title":"Read file contents — tool_read_file","text":"tool reads contents file returns string.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read file contents — tool_read_file","text":"","code":"tool_read_file(path)"},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_file.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Read file contents — tool_read_file","text":"tool definition created ellmer::tool().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read file contents — tool_read_file","text":"path Path file read (tool argument, R function argument)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_read_file.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read file contents — tool_read_file","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = list(tool_read_file) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_bash.html","id":null,"dir":"Reference","previous_headings":"","what":"Execute bash commands — tool_run_bash","title":"Execute bash commands — tool_run_bash","text":"tool executes bash/shell commands returns output. Use caution! can execute arbitrary system commands.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_bash.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Execute bash commands — tool_run_bash","text":"","code":"tool_run_bash(command)"},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_bash.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Execute bash commands — tool_run_bash","text":"tool definition created ellmer::tool().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_bash.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Execute bash commands — tool_run_bash","text":"command bash command execute (tool argument)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_bash.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Execute bash commands — tool_run_bash","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = list(tool_run_bash),   permissions = permissions_full()  # Required for bash ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_r_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Execute R code — tool_run_r_code","title":"Execute R code — tool_run_r_code","text":"tool executes R code returns result. default, runs separate process safety (requires callr package).","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_r_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Execute R code — tool_run_r_code","text":"","code":"tool_run_r_code(code)"},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_r_code.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Execute R code — tool_run_r_code","text":"tool definition created ellmer::tool().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_r_code.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Execute R code — tool_run_r_code","text":"code R code execute (tool argument)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_r_code.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Execute R code — tool_run_r_code","text":"tool intentionally uses R's code evaluation capabilities execute arbitrary R code provided LLM. core feature agentic workflows agent needs perform data analysis R tasks. safety: default, code runs sandboxed subprocess via callr timeout prevents runaway execution Permissions system can disable tool entirely","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_run_r_code.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Execute R code — tool_run_r_code","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = list(tool_run_r_code) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_fetch.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch web page content — tool_web_fetch","title":"Fetch web page content — tool_web_fetch","text":"tool fetches content web page returns text markdown. Requires httr2 package HTTP requests. JavaScript-rendered pages, consider using chromote package custom tool implementation.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_fetch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch web page content — tool_web_fetch","text":"","code":"tool_web_fetch(url)"},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_fetch.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Fetch web page content — tool_web_fetch","text":"tool definition created ellmer::tool().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_fetch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch web page content — tool_web_fetch","text":"url URL web page fetch (tool argument)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_fetch.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fetch web page content — tool_web_fetch","text":"tool uses httr2 fetch web content extracts text HTML. rvest package available, extracts main content intelligently. pandoc available via rmarkdown, HTML converted markdown. tool respects 30-second timeout follows redirects.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_fetch.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fetch web page content — tool_web_fetch","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = list(tool_web_fetch),   permissions = Permissions$new(web = TRUE) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_search.html","id":null,"dir":"Reference","previous_headings":"","what":"Search the web — tool_web_search","title":"Search the web — tool_web_search","text":"tool performs web search returns results. Uses DuckDuckGo's HTML search results default.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_search.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Search the web — tool_web_search","text":"","code":"tool_web_search(query, num_results = 10)"},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_search.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Search the web — tool_web_search","text":"tool definition created ellmer::tool().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_search.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Search the web — tool_web_search","text":"query search query (tool argument) num_results Maximum number results return (tool argument)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_search.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Search the web — tool_web_search","text":"tool searches web using DuckDuckGo returns list results titles, URLs, snippets. sophisticated search needs, consider using dedicated search API.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tool_web_search.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Search the web — tool_web_search","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = list(tool_web_search),   permissions = Permissions$new(web = TRUE) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tool_write_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Write content to a file — tool_write_file","title":"Write content to a file — tool_write_file","text":"tool writes content file, creating exist.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_write_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write content to a file — tool_write_file","text":"","code":"tool_write_file(path, content, append = FALSE)"},{"path":"https://jameshwade.github.io/deputy/reference/tool_write_file.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Write content to a file — tool_write_file","text":"tool definition created ellmer::tool().","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_write_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write content to a file — tool_write_file","text":"path Path file write (tool argument) content Content write file (tool argument) append TRUE, append existing file (tool argument)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tool_write_file.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Write content to a file — tool_write_file","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = list(tool_write_file) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tools_all.html","id":null,"dir":"Reference","previous_headings":"","what":"All built-in tools — tools_all","title":"All built-in tools — tools_all","text":"Returns built-tools. Use permissions_full() want allow operations.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_all.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"All built-in tools — tools_all","text":"","code":"tools_all()"},{"path":"https://jameshwade.github.io/deputy/reference/tools_all.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"All built-in tools — tools_all","text":"list tool definitions","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_all.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"All built-in tools — tools_all","text":"","code":"if (FALSE) { # \\dontrun{ # Allow all tools with full permissions agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = tools_all(),   permissions = permissions_full() ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tools_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Code execution tools — tools_code","title":"Code execution tools — tools_code","text":"Returns list tools code execution: run_r_code - Execute R code (sandboxed default) run_bash - Execute bash commands Note: tools require appropriate permissions. default, permissions_standard() allows R code bash.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Code execution tools — tools_code","text":"","code":"tools_code()"},{"path":"https://jameshwade.github.io/deputy/reference/tools_code.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Code execution tools — tools_code","text":"list tool definitions","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tools_code.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Code execution tools — tools_code","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = tools_code() ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tools_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Data reading tools — tools_data","title":"Data reading tools — tools_data","text":"Returns list tools reading data files: read_csv - Read CSV files summary read_file - Read file text","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data reading tools — tools_data","text":"","code":"tools_data()"},{"path":"https://jameshwade.github.io/deputy/reference/tools_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Data reading tools — tools_data","text":"list tool definitions","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tools_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Data reading tools — tools_data","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = tools_data() ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tools_file.html","id":null,"dir":"Reference","previous_headings":"","what":"File operation tools — tools_file","title":"File operation tools — tools_file","text":"Returns list tools file operations: read_file - Read file contents write_file - Write content files list_files - List directory contents","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"File operation tools — tools_file","text":"","code":"tools_file()"},{"path":"https://jameshwade.github.io/deputy/reference/tools_file.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"File operation tools — tools_file","text":"list tool definitions","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tools_file.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"File operation tools — tools_file","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = tools_file() ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tools_interactive.html","id":null,"dir":"Reference","previous_headings":"","what":"Tools for interactive workflows — tools_interactive","title":"Tools for interactive workflows — tools_interactive","text":"Returns list tools enable human---loop interactions. Currently includes tool_ask_user (AskUserQuestion) asking clarifying questions.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_interactive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tools for interactive workflows — tools_interactive","text":"","code":"tools_interactive()"},{"path":"https://jameshwade.github.io/deputy/reference/tools_interactive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tools for interactive workflows — tools_interactive","text":"list tool definitions.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tools_interactive.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Tools for interactive workflows — tools_interactive","text":"","code":"if (FALSE) { # \\dontrun{ agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = c(tools_file(), tools_interactive()) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tools_mcp.html","id":null,"dir":"Reference","previous_headings":"","what":"Get tools from MCP servers — tools_mcp","title":"Get tools from MCP servers — tools_mcp","text":"Fetches ellmer-compatible tools configured MCP servers using mcptools package use deputy agents. MCP (Model Context Protocol) allows agents access tools external services like GitHub, Slack, Google Drive, . Tools discovered dynamically running MCP servers.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_mcp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get tools from MCP servers — tools_mcp","text":"","code":"tools_mcp(config = NULL, servers = NULL)"},{"path":"https://jameshwade.github.io/deputy/reference/tools_mcp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get tools from MCP servers — tools_mcp","text":"config Path MCP configuration file. NULL (default), uses mcptools default location (~/.config/mcptools/config.json). servers Optional character vector server names load tools . NULL (default), loads tools configured servers. Filtering based pattern matching tool names.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_mcp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get tools from MCP servers — tools_mcp","text":"list tool definitions compatible Agent$register_tools(). Returns empty list mcptools installed tools available.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_mcp.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get tools from MCP servers — tools_mcp","text":"MCP configuration file follows Claude Desktop format:","code":"{   \"mcpServers\": {     \"github\": {       \"command\": \"npx\",       \"args\": [\"-y\", \"@modelcontextprotocol/server-github\"],       \"env\": {\"GITHUB_TOKEN\": \"...\"}     }   } }"},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tools_mcp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get tools from MCP servers — tools_mcp","text":"","code":"if (FALSE) { # \\dontrun{ # Get all MCP tools from default config mcp_tools <- tools_mcp()  # Create agent with MCP tools agent <- Agent$new(   chat = ellmer::chat_anthropic(),   tools = c(tools_file(), mcp_tools) )  # Use custom config file mcp_tools <- tools_mcp(config = \"path/to/config.json\")  # Load tools from specific servers only mcp_tools <- tools_mcp(servers = c(\"github\", \"slack\")) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tools_preset.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a tool preset by name — tools_preset","title":"Get a tool preset by name — tools_preset","text":"Returns pre-configured collection tools common use cases. Presets simplify agent setup providing curated toolsets.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_preset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a tool preset by name — tools_preset","text":"","code":"tools_preset(name)"},{"path":"https://jameshwade.github.io/deputy/reference/tools_preset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a tool preset by name — tools_preset","text":"name preset name. One : \"minimal\" - Read-tools safe exploration (read_file, list_files) \"standard\" - Balanced toolset R development (read_file, write_file, list_files, run_r_code) \"dev\" - Full development shell access (read_file, write_file, list_files, run_r_code, run_bash) \"data\" - Data analysis focused tools (read_file, list_files, read_csv, run_r_code) \"full\" - available tools (requires appropriate permissions)","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_preset.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a tool preset by name — tools_preset","text":"list tool definitions","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tools_preset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get a tool preset by name — tools_preset","text":"","code":"if (FALSE) { # \\dontrun{ # Minimal preset for read-only operations agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = tools_preset(\"minimal\"),   permissions = permissions_readonly() )  # Standard preset for typical development agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = tools_preset(\"standard\") )  # Data analysis preset agent <- Agent$new(   chat = ellmer::chat(\"openai/gpt-4o\"),   tools = tools_preset(\"data\") ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/tools_web.html","id":null,"dir":"Reference","previous_headings":"","what":"Web tools — tools_web","title":"Web tools — tools_web","text":"Returns list tools web operations. chat object provided, automatically selects best tools provider: Claude (Anthropic): Uses native claude_tool_web_search() claude_tool_web_fetch() higher quality results (requires admin enablement incurs extra cost) Google (Gemini/Vertex): Uses native google_tool_web_search() google_tool_web_fetch() OpenAI: Uses native openai_tool_web_search() providers: Falls back universal tools using httr2 DuckDuckGo Without chat argument, returns universal tools work provider.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_web.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Web tools — tools_web","text":"","code":"tools_web(chat = NULL, use_native = TRUE)"},{"path":"https://jameshwade.github.io/deputy/reference/tools_web.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Web tools — tools_web","text":"chat Optional ellmer Chat object. provided, returns provider-specific tools available better quality results. use_native Logical. TRUE (default), use native provider tools available. Set FALSE always use universal tools.","code":""},{"path":"https://jameshwade.github.io/deputy/reference/tools_web.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Web tools — tools_web","text":"list tool definitions","code":""},{"path":[]},{"path":"https://jameshwade.github.io/deputy/reference/tools_web.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Web tools — tools_web","text":"","code":"if (FALSE) { # \\dontrun{ # Universal tools (work with any provider) agent <- Agent$new(   chat = ellmer::chat_ollama(),   tools = tools_web(),   permissions = Permissions$new(web = TRUE) )  # Provider-specific tools (auto-detected) chat <- ellmer::chat_claude() agent <- Agent$new(   chat = chat,   tools = tools_web(chat),  # Uses Claude's native web tools   permissions = Permissions$new(web = TRUE) )  # Force universal tools even with Claude agent <- Agent$new(   chat = chat,   tools = tools_web(chat, use_native = FALSE),   permissions = Permissions$new(web = TRUE) ) } # }"},{"path":"https://jameshwade.github.io/deputy/reference/validate_questions.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate questions structure — validate_questions","title":"Validate questions structure — validate_questions","text":"Validate questions structure","code":""},{"path":"https://jameshwade.github.io/deputy/reference/validate_questions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate questions structure — validate_questions","text":"","code":"validate_questions(questions)"},{"path":"https://jameshwade.github.io/deputy/reference/validate_questions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate questions structure — validate_questions","text":"questions List question objects","code":""},{"path":"https://jameshwade.github.io/deputy/reference/validate_questions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate questions structure — validate_questions","text":"TRUE valid, otherwise throws error via tool_reject","code":""},{"path":"https://jameshwade.github.io/deputy/news/index.html","id":"deputy-0009000","dir":"Changelog","previous_headings":"","what":"deputy 0.0.0.9000","title":"deputy 0.0.0.9000","text":"Initial development version Core Agent class streaming run() blocking run_sync() methods Built-tools: tool_read_file, tool_write_file, tool_list_files, tool_run_r_code, tool_run_bash, tool_read_csv Tool bundles: tools_file(), tools_code(), tools_data(), tools_all() Permission system permissions_readonly(), permissions_standard(), permissions_full(), custom Permissions class Hook system HookMatcher, HookRegistry, events: PreToolUse, PostToolUse, Stop, UserPromptSubmit, PreCompact Multi-agent support agent_definition() LeadAgent Skills system skill_load(), skill_create(), Skill class Session persistence via save_session() load_session() Provider-agnostic design works ellmer-supported LLM","code":""}]
